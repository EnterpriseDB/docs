---
title: "Upgrading PostGIS"

legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-postgis/user-guides/postgis-guide/1.0/upgrading_postgis.html"
---

<div id="upgrade" class="registered_link"></div>

This section walks you through the following upgrade examples:

- Example 1 - Upgrading from PostGIS version 2.4.6 to PostGIS version 3.1.1 of the same EDB Postgres Advanced Server version 9.6.
- Example 2 - Upgrading from PostGIS version 2.4.6 for EDB Postgres Advanced Server 9.6 to PostGIS version 3.1.1 for EDB Postgres Advanced Server version 13.

## Example 1

The following example walks you through upgrading from PostGIS version 2.4.6 to PostGIS version 3.1.1 of the same EDB Postgres Advanced Server version 9.6:

!!! Note
    
    Ensure you have created extensions for PostGIS version 2.4.6 already.

1.  To upgrade from PostGIS version 2.4.6 to PostGIS version 3.1.1 for EDB Postgres Advanced Server 9.6:

    ```text
    yum upgrade edb-as96-postgis -y*
    ```

2. To update extensions, connect to the database (where you have already added extensions) with the psql client application, and execute the following commands:

    ```text
    alter extension postgis update to '3.1.1';
    WARNING: unpackaging raster
    WARNING: PostGIS Raster functionality has been unpackaged
    HINT: type `SELECT postgis_extensions_upgrade();` to finish the upgrade. After upgrading, if you want to drop raster, run: DROP EXTENSION postgis_raster;
    ALTER EXTENSION
    ```

    ```text
    edb=# alter extension address_standardizer update to '3.1.1';
    ALTER EXTENSION
    ```

    ```text
    edb=# SELECT postgis_extensions_upgrade();
    NOTICE: Updating extension postgis_sfcgal from 2.4.6 to 3.1.1
    NOTICE: Packaging extension postgis_raster
    NOTICE: Updating extension postgis_topology from 2.4.6 to 3.1.1
    NOTICE: Updating extension postgis_tiger_geocoder from 2.4.6 to 3.1.1
              postgis_extensions_upgrade           
    -------------------------------------------------------------------
     Upgrade completed, run SELECT postgis_full_version(); for details
    (1 row)
    ```

## Example 2

The following example walks you through upgrading from PostGIS version 2.4.6 for EDB Postgres Advanced Server 9.6 to PostGIS version 3.1.1 for EDB Postgres Advanced Server version 13:

!!! Note

    You can upgrade to PostGIS latest version only for  PostgreSQL version greater than or equal to 9.6. 

1.  Navigate to the bin directory of EDB Advanced Server 9.6 and initialize the cluster:

    ```text
    cd /usr/edb/as9.6/bin/
    
    ./edb-as-96-setup initdb
    ```

    !!! Note
    
        Ensure you have created extensions for PostGIS version 2.4.6.

2. Start the EDB Postgres Advanced Server 9.6 service:

    ```text
    systemctl start edb-as-9.6
    ```

4.  Upgrade the PostGIS version 2.4.6 to version 3.1.1 for EDB Advanced Server 9.6:

    ```text
    yum upgrade edb-as96-postgis*
    ```

5. To update extensions, switch to an `enterprisedb` user, connect to the database (where you have already added extensions) with the psql client application, and execute the following commands:

    ```text
    su enterprisedb
    ./psql -d edb -p 5444
    ```

    ```text
    alter extension postgis update to '3.1.1';
    WARNING: unpackaging raster
    WARNING: PostGIS Raster functionality has been unpackaged
    HINT: type `SELECT postgis_extensions_upgrade();` to finish the upgrade. After upgrading, if you want to drop raster, run: DROP EXTENSION postgis_raster;
    ALTER EXTENSION
    ```

    ```text
    edb=# alter extension address_standardizer update to '3.1.1';
    ALTER EXTENSION
    ```

    ```text
    edb=# SELECT postgis_extensions_upgrade();
    NOTICE: Updating extension postgis_sfcgal from 2.4.6 to 3.1.1
    NOTICE: Packaging extension postgis_raster
    NOTICE: Updating extension postgis_topology from 2.4.6 to 3.1.1
    NOTICE: Updating extension postgis_tiger_geocoder from 2.4.6 to 3.1.1
              postgis_extensions_upgrade           
    -------------------------------------------------------------------
     Upgrade completed, run SELECT postgis_full_version(); for details
    (1 row)
    ```

6. Stop the EDB Postgres Advanced Server 9.6 server service:

    ```text
    systemctl stop edb-as-9.6
    ```

7.  Assume the superuser privileges and install the EDB Postgres Advanced Server version 13:

    ```text
    yum install edb-as13-server -y
    ```
8.  Navigate to the bin directory of EDB Advanced Server 13 and initialize the cluster:

    ```text
    cd /usr/edb/as13/bin/

    ./edb-as-13-setup initdb
    ```

9. Install the PostGIS version 3.1.1 for EDB Postgres Advanced Server version 13.0:

    ```text
    yum install edb-as13-postgis3
    ```

10. Switch to an `enterprisedb` user and create a `temp` folder:

    ```text
    su enterprisedb
    cd $(mktemp -d)
    ```

11.  Execute the following command to upgrade to EDB Postgres Advanced Server 13:

    ```text
    /usr/edb/as13/bin/pg_upgrade -d /var/lib/edb/as9.6/data/ -D /var/lib/edb/as13/data/ -U enterprisedb -b /usr/edb/as9.6/bin/ -B /usr/edb/as13/bin/ -p 5444 -P 5445 -c

    /usr/edb/as13/bin/pg_upgrade -d /var/lib/edb/as9.6/data/ -D /var/lib/edb/as13/data/ -U enterprisedb -b /usr/edb/as9.6/bin/ -B /usr/edb/as13/bin/ -p 5444 -P 5445 --link
     ```

12. Navigate to the bin directory of EDB Advanced Server 13 and start the service:

    ```text
    cd /usr/edb/as13/bin/

    systemctl start edb-as-13
    
    systemctl status edb-as-13
    ```

13. To update extensions, switch to an `enterprisedb` user, connect to the database (where you have already added extensions) with the psql client application, and execute the following commands:

    ```text
    su enterprisedb
    ./psql -d edb -p 5444
    edb=# SELECT PostGIS_Extensions_Upgrade(); 
    NOTICE: Updating extension postgis 3.1.1
          postgis_extensions_upgrade           
    -------------------------------------------------------------------
    Upgrade completed, run SELECT postgis_full_version(); for details
    (1 row)
    ```