---
title: Monitoring the Connection Manager
navTitle: Monitoring
description: Monitoring the Connection Manager through SQL and HTTP
deepToC: true
---

## Available tables and views

The Connection Manager provides a number of tables and views that can be used to monitor the status of the Connection Manager and its connections. These include:

- [`bdr.stat_activity`](/pgd/latest/reference/tables-views-functions/catalogs-visible#bdrstat_activity) &mdash; which is information from `pg_stat_activity` enhanced with addition columns regarding the `connection_manager_client_addr` and `connection_manager_client_port` is the connection has come through the connection manager, and `session_read_only` if it has connected through the read-only port.
- [`bdr.stat_connection_manager`](/pgd/latest/reference/tables-views-functions/catalogs-visible#bdrstat_connection_manager) &mdash; which is a view that provides statistics about the Connection Manager's status.
- [`bdr.stat_connection_manager_connections`](/pgd/latest/reference/tables-views-functions/catalogs-visible#bdrstat_connection_manager_connections) &mdash; which is a view that provides statistics about the Connection Manager's connections.
- [`bdr.stat_connection_manager_nodes_stats`](/pgd/latest/reference/tables-views-functions/catalogs-visible#bdrstat_connection_manager_nodes) &mdash; which is a view that provides statistics about the Connection Manager on each of the data nodes.
- [`bdr.stat_connection_manager_hba_file_rules`](/pgd/latest/reference/tables-views-functions/catalogs-visible#bdrstat_connection_manager_hba_file_rules) &mdash; which is a view that shows which HBA file rules for the connection manager are being used on this node.

## Monitoring the Connection Manager

The Connection Manager can be monitored through the HTTP API. The following endpoints are available:

**TODO**

## Logging

All Connection Manager log messages are written to the PostgreSQL log. 

The behavior of `%r` and `%h` escape sequences in log_line_prefix has been altered to log "proxy_address/client_address" and "proxy_port/client_port" respectively.

This is achieved by the proxy setting a GUC for the server connections it uses. As users can override this GUC, any security context derived from the client_address will need to be verified by referring to the full session logs.

