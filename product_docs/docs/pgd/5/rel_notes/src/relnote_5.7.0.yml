# yaml-language-server: $schema=https://raw.githubusercontent.com/EnterpriseDB/docs/refs/heads/develop/tools/automation/generators/relgen/relnote-schema.json
product: EDB Postgres Distributed
version: 5.7.0
date: 18 February 2025
components:
  "BDR": 5.7.0
  "PGD CLI": 5.7.0
  "PGD Proxy": 5.7.0
  "Utilities": 5.7.0
intro: |
 EDB Postgres Distributed 5.7.0 includes a number of enhancements and bug fixes.
highlights: |
  - Highlights here
relnotes:
- relnote: Improved performance of DML and other operations on partitioned tables
  component: BDR
  details: |
    Many code paths touching partitioned tables were performing costly checks to support additional Table Access Methods. This code was adjusted to make the most common case (heap) the fastest.
  jira: BDR-5860
  addresses: ""
  type: Enhancement
  impact: High
- relnote: Unsupported `ALTER TABLE` command on a materialized views is no longer replicated
  component: BDR
  details: |
    Earlier this would cause replication getting stuck when the command was issued.
  jira: BDR-5997
  addresses: ""
  type: Bug Fix
  impact: Lowest
- relnote: Improve PostgreSQL 17 compatibility
  component: BDR
  details: |
    Internal tables managed by autopartition that were created before the upgrade to PG17 were missing a `rowtype` entry into `pg_depend` which would cause errors after upgrading to PG17.
  jira: BDR-5997
  addresses: ""
  type: Bug Fix
  impact: Medium
- relnote: Omit redundant `WARNING` when executing `ALTER SEQUENCE`
  component: BDR
  details: |
    The message is only relevant when creating the sequence.
  jira: BDR-6066
  addresses: ""
  type: Enhancement
  impact: Medium
- relnote: Fixed a server panic by ensuring that we don't do catalog lookups in a callback that gets called very late in the commit cycle
  component: BDR
  details: |
    The message is only relevant when creating the sequence.
  jira: BDR-5832
  addresses: ""
  type: Bug Fix
  impact: High
- relnote: Fixed an unintentional timed wait for a synchronous logical replication, resulting in unusually high latency for some transactions
  component: BDR
  details: |
    The message is only relevant when creating the sequence.
  jira: BDR-5809
  addresses: 42273
  type: Bug Fix
  impact: High
- relnote: Support failover slots for logical replication
  component: BDR
  details: |
    When a PGD node fails or becomes unavailable, consumers can now continue to consume changes from some other node in the cluster. The feature can be turned on by setting top group option `failover_slot_scope` to `global`. The consumer needs to handle duplicate transactions, but PGD
    guarantees that every transaction is decoded and sent at least once.
  jira: BDR-5673, BDR-5925
  addresses: ""
  type: Feature
  impact: High
- relnote: Ensure that the `remote_commit_time` and `remote_commit_lsn` are properly reported in the conflict reports
  component: BDR
  details: |
  jira: BDR-5808
  addresses: 42273
  type: Feature
  impact: High
- relnote: Fix an occasional hang in concurrent joins of subscriber-only nodes
  component: BDR
  details: |
    A node may end up waiting for the local state of another concurrently joined node to advance, resulting in a hang.
  jira: BDR-5789
  addresses: 42964
  type: Feature
  impact: Medium
- relnote: Fixed a bug where parting would hang in case of consensus timing out or consensus errors
  component: BDR
  details: |
    Also ensure parting does not hang when any of the nodes restart when part is in progress and origin LSNs do not show up as 0/0 in log messages
  jira: BDR-5777
  addresses: 42056
  type: Bug Fix
  impact: Medium
- relnote: Fixed a memory leak in a global hook
  component: BDR
  details: |
    This could cause memory to leak even if `bdr.so` is just loaded, without even installing the extension itself.
  jira: BDR-5821
  addresses: 43678
  type: Bug Fix
  impact: Medium
- relnote: Fixed a bug where subgroup member part would prevent new nodes from joining
  component: BDR
  details: |
    Ensure that if a subgroup member is parted while Raft subgroup routing is active, that another node can subsequently be joined to that subgroup.
  jira: BDR-5781
  addresses: ""
  type: Bug Fix
  impact: Medium
- relnote: Fixed a case where galloc sequence overflow was not being caught correctly
  component: BDR
  details: |
    This would result in `nextval` call being stuck.
  jira: BDR-5930
  addresses: 44755
  type: Bug Fix
  impact: Medium
- relnote: Fixed group slot movement for witness and data nodes in presence of subscriber-only node(s) and witness node(s)
  component: BDR
  details: |
    From PGD 5.6.0 onwards, there are no subscriptions from a subscriber-only node to a witness node. This caused a problem with movement of group slot on data nodes and witness nodes in the presence of subscriber-only nodes in the cluster. This bug can cause WAL to be held on both witness nodes and data nodes when there is a subscriber-only node in the cluster. This is fixed.
  jira: BDR-5992
  addresses:
  type: Bug Fix
  impact: Medium
- relnote: Disallow GRANT on BDR objects to non-BDR users
  component: BDR
  details: |
  jira: BDR-5759
  addresses: ""
  type: Bug Fix
  impact: Lowest
- relnote: Improved `bdr_init_physical` to be able to run without superuser
  component: BDR
  details: |
    Only the `bdr_superuser` is required.
  jira: BDR-5231
  addresses: ""
  type: Enhancement
  impact: Medium
- relnote: Fixed a bug where conflict resolution functions were executed also on the witness node(s)
  component: BDR
  details: |
  jira: BDR-5807
  addresses: ""
  type: Bug Fix
  impact: Medium
- relnote: Handle additional replication sets on witness nodes
  component: BDR
  details: |
    The witness node only cares about the top replication set, thus allow it to miss replications sets and not error-out.
  jira: BDR-5880
  addresses: "41776, 44527"
  type: Bug Fix
  impact: Low
- relnote: Multiple fixes to `bdr.leader` table maintenance
  component: BDR
  details: |
    The witness node only cares about the top replication set, thus allow it to miss replications sets and not error-out.
  jira: BDR-5703
  addresses: ""
  type: Bug Fix
  impact: Lowest
- relnote: Narrow down `bdr.node_slots` output to list relevant slots only
  component: BDR
  details: |
    The slots are displayed based on the node type, its role and the cluster topology
  jira: BDR-5253
  addresses: ""
  type: Enhancement
  impact: High
- relnote: Add `target_type` column to `bdr.node_slots` view to indicate slot purpose/status
  component: BDR
  details: |
  jira: BDR-5253
  addresses: ""
  type: Enhancement
  impact: High
- relnote: Add `target_type` column to `bdr.node_slots` view to indicate slot purpose/status
  component: BDR
  details: |
  jira: BDR-5253
  addresses: ""
  type: Enhancement
  impact: High
- relnote: Fixed a bug where `bdr_init_physical` hangs when `synchronous_commit` is set to `remote_write/remote_apply`
  component: BDR
  details: |
    `bdr_init_physical` disables synchronous replication on new node by resetting `synchronous_standby_names` to an empty string. A warning message is printed to remind setting `synchronous_standby_names` as needed.
  jira: BDR-5918
  addresses: 44760
  type: Bug Fix
  impact: Medium
- relnote: Added GUC to support upgrade to 5.7.0 for clusters with optimized topology (a preview feature)
  component: BDR
  details: |
    An upgrade to 5.7.0 from clusters that have value of `bdr.force_full_mesh` set to `off` to enable optimized topology,
    a preview feature, must first set this GUC to `on` and then upgrade. After the entire cluster upgrades,
    this GUC can be set to `off` again to enable optimized topology.
    Having this GUC set to `off` during upgrade is not supported.
  jira: BDR-5872
  addresses: ""
  type: Other
  impact: Low
- relnote: Changed origin deletion to be done asynchronously when optimized topology is enabled
  component: BDR
  details: |
    In an optimized topology, origins names use the generation ID of the node. This fixes an inconsistency when a node is parted, some transactions can be lost or sent twice.
  jira: BDR-5872
  addresses: ""
  type: Bug Fix
  impact: Low
- relnote: Fixed a crash during upgrades in mixed version cluster
  component: BDR
  details: |
    Fix a case in upgrade from versions lower than 5.6.0 to 5.6.0 and above where, in a mixed mode cluster with a standby or if a node joins or is parted there can be a crash.
  jira: BDR-6087
  addresses: ""
  type: Bug Fix
  impact: Low
