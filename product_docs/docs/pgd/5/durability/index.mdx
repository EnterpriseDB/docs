---
title: Durability

navigation:
 - overview
 - configuring
 - comparing
 - commit-scopes
 - group-commit
 - camo
 - lag-control
 - administering
 - legacy-sync
 - limitations

redirects:
  - /pgd/latest/bdr/durability/
  - /pgd/latest/choosing_durability/
---

EDB Postgres Distributed offers a range of synchronous modes to complement its
default asynchronous replication. These synchronous modes are configured through
commit scopes; rules that define how operations are handled and when the system
should consider a transaction committed. 

* [Overview](overview) introduces these concepts and some of the essential 
terminology which is used when discussing synchronous commits.

* [Comparing](comparing) compares how each option behaves.

* [Configuring](configuring) shows how you can use the PGD SQL interface to set up
commit scopes which manage the various synchronous commit options.

* [Commit Scopes](commit-scopes) is a more in-depth look at the syntax and structure
of commit scopes and how to define them for your needs.

* [Group Commit](group-commit) focuses on the Group Commit option, where you can
define a transaction as done when a group of nodes agrees its done.

* [CAMO](camo) focuses on the Commit At Most Once option, which allows applications
to participate in confirming a transaction has been done and in turn ensure that
their commits only happen at most once.

* [Lag Control](lag-control) looks at the commit scope mechanism which regulates how
far out of sync nodes may go when a database node goes out of service.

* [Administering](administering) addresses how a PGD cluster with Group Commit
in use should be managed.

* [Legacy Synchronous Replication](legacy-sync) shows how traditional Postgres synchronous operations
can still be accessed under EDB Postgres Distributed.

* [Limitations](limitations) lists the various combinations of durability options
which are not currently supported or not possible. Do refer to this before deciding
on a durability strategy.


<!---


## Internal timing of operations

For a better understanding of how the different modes work, it's
helpful to realize PSR and PGD apply transactions
differently.

With physical streaming replication, the order of operations is:

-   Origin flushes a commit record to WAL, making the transaction
    visible locally.
-   Peer node receives changes and issues a write.
-   Peer flushes the received changes to disk.
-   Peer applies changes, making the transaction visible locally.

With PGD, the order of operations is different:

-   Origin flushes a commit record to WAL, making the transaction
    visible locally.
-   Peer node receives changes into its apply queue in memory.
-   Peer applies changes, making the transaction visible locally.
-   Peer persists the transaction by flushing to disk.

For Group Commit, CAMO, and Eager, the origin node waits for
a certain number of confirmations prior to making the transaction
visible locally. The order of operations is:

-   Origin flushes a prepare or precommit record to WAL.
-   Peer node receives changes into its apply queue in memory.
-   Peer applies changes, making the transaction visible locally.
-   Peer persists the transaction by flushing to disk.
-   Origin commits and makes the transaction visible locally.

The following table summarizes the differences.

| Variant          | Order of apply vs persist | Replication before or after commit |
|:-----------------|:-------------------------:|:----------------------------------:|
| PGD Async        |        apply first        |  after WAL flush of commit record  |
| PGD Lag Control  |        apply first        |  after WAL flush of commit record  |
| PGD Group Commit |        apply first        |      before COMMIT on origin       |
| PGD CAMO         |        apply first        |      before COMMIT on origin       |


--->