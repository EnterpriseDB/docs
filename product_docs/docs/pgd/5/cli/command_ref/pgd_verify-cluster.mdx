---
title: verify-cluster
---

Verifies whether the cluster follows the rules as per the AlwaysOn architecture.

### Synopsis

Verifies whether the cluster follows the rules as per the AlwaysOn architecture.


```sh
pgd verify-cluster [flags]
```

### Examples

```text

  Example 1 (cluster with not recommended architecture)

  $ pgd verify-cluster

  Check                                                                               Status   Groups
  -----                                                                               ------   ------
  There is always at least 1 Global Group and 1 Data Group                            Ok
  There are at least 2 data nodes in a Data Group (except for the witness-only group) Critical group_b
  There is at most 1 witness node in a Data Group                                     Warning  group_a
  Witness-only group does not have any child groups                                   Ok
  There is at max 1 witness-only group iff there is even number of local Data Groups  Warning  bdrgroup
  There are at least 2 proxies configured per Data Group if routing is enabled        Warning  group_a, group_b


  Example 2 (cluster with recommended architecture)

  $ pgd verify-cluster

  Check                                                                               Status Groups
  -----                                                                               ------ ------
  There is always at least 1 Global Group and 1 Data Group                            Ok
  There are at least 2 data nodes in a Data Group (except for the witness-only group) Ok
  There is at most 1 witness node in a Data Group                                     Ok
  Witness-only group does not have any child groups                                   Ok
  There is at max 1 witness-only group iff there is even number of local Data Groups  Ok
  There are at least 2 proxies configured per Data Group if routing is enabled        Ok

```

### Options

```text
  -h, --help   help for verify-cluster
```

### Options inherited from parent commands

```text
  -f, --config-file string   config file; ignored if 
                             --dsn flag is present (default "/etc/edb/pgd-cli/pgd-cli-config.yml")
      --dsn string           database connection string
                             e.g."host=bdr-a1 port=5432 dbname=bdrdb user=postgres "
  -L, --log-level string     logging level: debug, info, warn, error (default "error")
  -o, --output string        output format: json, yaml
```
