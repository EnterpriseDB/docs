---
title: Online maintenance
description: How to use PGD to perform online maintenance
redirects: 
  - ../bdr/scaling
---

## TODO - this prose was stolen from Aaron's work on an OM SOP...
Within a group of two or more Postgres Distributed data nodes the Switchover feature leverages the capabilities of the Postgres Distributed logical replication, Proxy and Command Line Interface and the to enable intensive Online Maintenance of Postgres Distributed nodes with sub-second interruption in service.  The pattern here depends on the capacity to isolate a single Postgres Distributed node from PSQL activity; that is to say we don’t want to execute maintenance on your Write Leader, nor optimally any node serving Read Only traffic or other RDBMS processes such as ETL.  In the most general case, the Write Lead will be the critical Postgres Distributed node, leaving the other nodes as good targets for online maintenance, finally rotating across all nodes leader last.

PSQL traffic routed through the Proxy is directed to the Write Leader.  The Write Leader is normally selected by consensus of a quorum of data nodes and in case of a fault in the current Write Leader, a new Write Leader is selected automatically which is a reactive failover.  When the Write Leader is selected manually we call this a Switchover.  Switchover has the advantage of avoiding the need to respect timings and other latency associated with reacting to spontaneous failure.  Because you’ve directed the change, it can be made nearly instantaneously.

The Postgres Distributed extension is also capable of evaluating the PSQL requests in order to replicate them for execution on specified Postgres Distributed nodes, even if that is to the exclusion of the Write Leader itself.  Specifically, the utility function, bdr.run_on_nodes, allows you to specify where to execute your PSQL commands. 
