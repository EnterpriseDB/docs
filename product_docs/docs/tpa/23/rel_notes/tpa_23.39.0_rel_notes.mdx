---
# IMPORTANT: Do not edit this file directly - it is generated from yaml source.
title: Trusted Postgres Architect 23.39.0 release notes
navTitle: Version 23.39.0
originalFilePath: product_docs/docs/tpa/23/rel_notes/src/tpa_23.39.0_rel_notes.yml
editTarget: originalFilePath
---

Released: 22 August 2025

New features, enhancements, bug fixes, and other changes in Trusted Postgres Architect 23.39.0 include the following:

## Highlights

- ...

## Enhancements

<table class="table w-100"><thead><tr><th>Description</th><th width="10%">Addresses</th></tr></thead><tbody>
<tr><td><details><summary>Added support for PEM on Ubuntu 24.04.</summary><hr/><p>There was no specific package defined for this distro which caused deployment
errors. Additionally, this ensures that either mod_wsgi or edb's mod_wsgi module
is enabled by default where it applies.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Added <code>edb_stat_monitor</code> to recognized extensions.</summary><hr/><p>When a user specifies <code>edb_stat_monitor</code> as an entry in either <code>postgres_extensions</code>
or the list of extensions named under <code>postgres_databases</code>, TPA will handle installing
the correct package, creating the extension and including it in the <code>shared_preload_libraries</code>.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Add support for s390x (aka IBM Z and LinuxONE)</summary><hr/><p>TPA now supports the s390x CPU architecture. Supported s390x
operating systems are RHEL 8 and 9 and SLES 15. TPA can run
on these systems and use them as target hosts for cluster
deployment.</p>
<p>Because s390x binaries are not available for all PyPI packages, it
is highly recommended that you install the <code>tpaexec-deps</code> package
from EDB rather than rely on installation from PyPI during setup.
Similarly, because there is not a PGDG RPM repo for s390x you must
have access to EDB Repos for TPA to install Postgres and other
cluster components from packages.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Added <code>auto.rewind</code> property for EFM 5.1 and above.</summary><hr/><p>Starting with EFM 5.1, there will be a new property <code>auto.rewind</code> that
is part of a new feature to attempt to rebuild failed primary db servers.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Add EFM <code>jdbc.properties</code> property support</summary><hr/><p>This adds support for the <code>jdbc.properties</code> property in EFM 5.0 and later.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Add <code>jdbc.loglevel</code> property for EFM 5.1 and above.</summary><hr/><p>Starting with EFM 5.1, there will be a new property <code>jdbc.loglevel</code> that
is used to increase information logged from the JDBC driver. This property can
be used to get more information when there are connection problems, e.g. when
using ssl for database connections.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Add <code>check.vip.timeout property</code> for EFM 5.1 and above</summary><hr/><p>Starting with EFM 5.1, there will be a new property <code>check.vip.timeout</code>
that is used to control how long EFM will keep checking is the VIP (if used) is
reachable before promoting a standby.</p>
</details></td><td></td></tr>
</tbody></table>


## Changes

<table class="table w-100"><thead><tr><th>Description</th><th width="10%">Addresses</th></tr></thead><tbody>
<tr><td><details><summary>Ubuntu 20.04 (Focal) is now a legacy distribution.</summary><hr/><p>Ubuntu 20.04 is now out of support upstream and is no longer fully supported
by TPA.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Removed support for obsolete EDB/2q repositories.</summary><hr/><p>Now that the old 2q repositories and EDB Repos 1.0 are no longer
available, TPA will not try to use them or check for configuration related
to them. All packages that were formerly available in those repositories are now
available in the EDB Repos 2.0 repositories.</p>
</details></td><td></td></tr>
<tr><td><details><summary>TPA will now suppress PGDG repos when using EDB repos on SLES.</summary><hr/><p>When running <code>tpaexec configure</code> for a SLES system, use either EDB repositories
or PGDG repositories, not both, matching the behavior of other operating systems.
This ensures that packages such as barman, which are available in both places,
are consistently sourced from the same repository as other packages.</p>
</details></td><td></td></tr>
<tr><td><details><summary>TPA will now use <code>bdr_package_version</code> as default PGD Proxy version.</summary><hr/><p><code>pgd_proxy_package_version</code> and <code>pgdcli_package_version</code> may be explicitly
defined in config.yml. If they are not explicitly defined, they now default to
the value of <code>bdr_package_version</code>, if it is set. If none of them is set, the latest
available versions of packages are installed. Setting these package versions to
different values is not supported and is only useful for testing.</p>
</details></td><td>49150</td></tr>
<tr><td><details><summary>Reduced default for <code>vacuum_cost_delay</code> to 2ms</summary><hr/><p>In recent Postgres versions, the suggested default for <code>vacuum_cost_delay</code>
has been reduced to 2ms. TPA now matches this.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Documented node promotability logic and the <code>efm-not-promotable</code> role for EFM.</summary><hr/><p>Added a new section to the <code>efm.md</code> documentation that explains how TPA determines
whether a node is eligible for promotion during failover. The update clarifies
the rules for promotability, including the roles of witness nodes, cascading standbys,
and nodes explicitly marked with the <code>efm-not-promotable</code> role. This enhancement
should help users understand and control failover behavior, reducing the risk
of unintended promotions in EFM-managed clusters.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Document <code>include_vars</code> behavior for templated variables.</summary><hr/><p>Since the <code>include_vars</code> module immediately parses and evaluates expressions,
nested variables do not exist at the point they are loaded from <code>config.yml</code> and
thus are undefined when evaluated in templated expressions. This is now documented
with an example so it is clearer for users.</p>
</details></td><td>45722</td></tr>
<tr><td><details><summary>Use Docker images from Rocky Linux organization.</summary><hr/><p>TPA now uses the Rocky Linux organization's docker images rather than docker
hub's &quot;official&quot; ones. These are more frequently updated and hence less likely
to cause dependency problems with newer packages.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Updated architecture info for PGD 6 architectures.</summary><hr/><p>The PGD6 architectures now have correct metadata and therefore appear as
expected in the output of <code>tpaexec info architectures</code>.</p>
</details></td><td></td></tr>
</tbody></table>


## Bug Fixes

<table class="table w-100"><thead><tr><th>Description</th><th width="10%">Addresses</th></tr></thead><tbody>
<tr><td><details><summary>Fixed an issue whereby <code>replication</code> user was missing from <code>.pgpass</code> on the primary node.</summary><hr/><p>The <code>replication_user</code> entry is required the <code>.pgpass</code> file for both <code>replica</code>
and <code>primary</code> nodes managed by either <code>efm</code> or <code>patroni</code> as the <code>failover_manager</code>.
Previously, it was only added to the .pgass file for <code>replica</code> nodes, resulting
in connection issues to the primary node after a switchover.</p>
</details></td><td>48224</td></tr>
<tr><td><details><summary>Fixed an issue whereby TPA would attempt to enable routing for subscriber-only groups in PGD6 clusters.</summary><hr/><p>Previously, TPA would mistakenly try to enable routing for subscriber-only
groups during PGD6 deployments. This property is not editable anymore as it forms
core part of the definition of subscriber-only groups in PGD6.</p>
</details></td><td>49673</td></tr>
<tr><td><details><summary>Fixed an issue whereby PEM deployment would fail with PEM 10.1.1.</summary><hr/><p>The TPA task <code>Register PEM backend database server for monitoring and configuration</code>
explicitly calls the <code>pem.setup</code> SQL function. This is not considered part of
the public API of PEM and the signature changed between 10.1.0 and 10.1.1 causing
TPA's call to this function to fail. This fix addresses the issue by adjusting
the function call according to the installed PEM server version. To accommodate
this change we have introduced a new <code>pem/server/facts</code> Ansible role that is responsible
for collecting facts about the installed PEM version. This also means that TPA
will no longer attempt to run <code>postgresexpert.sql</code> on PEM 10, where Postgres Expert
is no longer present.</p>
</details></td><td></td></tr>
<tr><td>Fixed an issue whereby `harp_dcs_user` was not created when using multiple failover managers</td><td>49150</td></tr>
<tr><td><details><summary>Fixed an issue whereby <code>bdr_node_groups</code> could not be overridden.</summary><hr/><p>If a file supplied in the --overrides-from argument to <code>tpaexec configure</code>
sets <code>bdr_node_groups</code> in <code>cluster_vars</code>, the contents of this will now be added to
the node groups automatically created.</p>
</details></td><td>50550</td></tr>
<tr><td><details><summary>Fixed issue whereby TPA would use <code>pgdproxy</code> user in DSN on PGD6 nodes.</summary><hr/><p>Since PGD version 6 has a built-in Connection Manager which replaces PGD
Proxy, the <code>pgdproxy</code> Postgres user should not be used in any DSNs. A new variable
<code>bdr_connection_manager_route_dsn</code> is introduced for defining connection strings
to Connection Manager. Users can additionally define <code>bdr_connection_manager_dsn_attributes</code>
in their <code>config.yml</code> to specify additional connection parameters in the DSN.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Fixed an issue with <code>ignore_slots</code> for Patroni clusters with multiple Barman servers.</summary><hr/><p>For Patroni clusters TPA will now dynamically generate the ignore_slots
setting corresponding to Barman nodes in the cluster. This change ensures that
Patroni will not remove the physical slots created for each of the Barman nodes.
This is especially important for the Patroni clusters with more than one backup
servers; including shared Barman nodes for example.</p>
</details></td><td>50748</td></tr>
<tr><td><details><summary>Fixed usability and improve reliability of the TPA Docker image.</summary><hr/><p>Upgraded Base Image to Debian Trixie to meet TPA's Python 3.12
minimum requirement, ensuring compatibility with modern dependencies.</p>
<ul>
<li>Removed <code>--use-community-ansible</code> flag as it is no longer supported.</li>
<li>Included the <code>openssh-client</code> package to prevent <code>tpaexec</code> failures due to missing <code>ssh-keygen</code>, enhancing out-of-the-box functionality.</li>
<li>Introduced Build-Time Versioning: Added an <code>ARG</code> variable to pass the output of <code>git describe</code> from the host during build, storing it as <code>/opt/EDB/TPA/VERSION</code> for improved version tracking.</li>
<li>Revised <code>docker/README.md</code> and <code>docs/src/INSTALL-docker.md</code> to reflect the latest setup instructions and best practices.</li>
</ul>
</details></td><td></td></tr>
<tr><td><details><summary>Fixed an issue whereby Barman could not run <code>switch-wal</code>.</summary><hr/><p>For Postgres 15+, the Barman user is now created with the <code>pg_checkpoint</code>
role. This allows Barman to run CHECKPOINT without the need of being superuser,
<code>barman switch-wal --force</code> will not fail any more.</p>
</details></td><td></td></tr>
</tbody></table>


