# yaml-language-server: $schema=https://raw.githubusercontent.com/EnterpriseDB/docs/refs/heads/develop/tools/automation/generators/relgen/relnote-schema.json

product: Trusted Postgres Architect
version: 23.40.1
date: 28 October 2025
intro: |
  This is a bug fixes release. The issues resolved in Trusted Postgres Architect 23.40.01 include the following:

relnotes:
- relnote: Fixed a misconfiguration of the `.pgpass` file when `backup_name` is used.
  details: |
    Previously, when using the `backup_name` variable, TPA would incorrectly use this name in `pgpass` for the Barman server. 
    This has been fixed and the documentation has been updated.
  jira:
  - TPA-1052
  type: Bug Fix
  impact: low

- relnote: TPA now ensures EDB repos are used when Beacon Agent is included in a cluster.
  details: |
    TPA can deploy the Beacon Agent to monitor the health of a system. However,
    it needs access to a valid EDB repository. This change ensures that the Standard
    repository is enabled when the Beacon Agent is to be deployed.
  jira:
  - TPA-1072
  type: Bug Fix
  impact: low

- relnote: Fixed unnecessary output after deploy by removing the post-deploy check for pgbouncer_auth_function in pg_catalog.
  details: |
    TPA recently relocated the pgbouncer_auth_function used to authenticate
    users when pgbouncer is in use. This was done in an effort to better follow the
    best practices and avoid issues during upgrade where pg_catalog function would
    not be part of the dump of the database. TPA introduced a post deploy check to
    help users still relying on the auth function defined in pg_catalog to identify
    the problem and make sure that they are able to fix it before removing the function
    from their systems. This check was used as a transition mechanism and is now being
    removed. This resolves issues with unwanted output generated by that check.
  jira:
  - TPA-1107
  - TPA-382
  addresses: 100065
  type: Bug Fix
  impact: medium

- relnote: Fixed issue whereby Barman could not configure the log_file parameter correctly.
  details: |
    When setting up a barman node, the variable 'barman_log_file' was not setting
    up an alternative directory to place the log file. Instead, it used the default
    location (`/var/log/barman/barman.log`). Bug and fix reported by voxnyx ([https://github.com/voxnyx](https://github.com/voxnyx)).
  jira:
  - TPA-1077
  type: Bug Fix
  impact: low

- relnote: Fixed an issue whereby the PGD `alter_node_option` task would run for physical replicas.
  details: |
    In a `PGD-AlwaysON` cluster with a BDR node that is also a physical replica, the
    upgrade process would fail during the `alter_node_option` task because a BDR node
    is expected to have RAFT enabled, but the physical replica BDR node does not.
    TPA now skips this task on any node with the `replica` role, allowing
    upgrade to complete successfully.
  jira:
  - TPA-1158
  addresses: 51997
  type: Bug Fix
  impact: high
