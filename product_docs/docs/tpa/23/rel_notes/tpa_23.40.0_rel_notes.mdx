---
# IMPORTANT: Do not edit this file directly - it is generated from yaml source.
title: Trusted Postgres Architect 23.40.0 release notes
navTitle: Version 23.40.0
originalFilePath: product_docs/docs/tpa/23/rel_notes/src/tpa_23.40.0_rel_notes.yml
editTarget: originalFilePath
---

Released: 2 October 2025

New features, enhancements, bug fixes, and other changes in Trusted Postgres Architect 23.40.0 include the following:

## Enhancements

<table class="table w-100"><thead><tr><th>Description</th><th width="10%">Addresses</th></tr></thead><tbody>
<tr><td><details><summary>Added support for upgrading EDB Postgres Distributed (PGD) v5 clusters to v6.</summary><hr/><p>TPA now provides a workflow for upgrading an existing PGD-Always-ON
cluster to a PGD-X cluster. Due to the significant differences
between these architectures, this is a multi-step process whereby
you must first upgrade to PGD 5.9, then enable connection manager,
then finally upgrade to PGD 6. This process will be further
automated in a future TPA release. Please refer to the TPA docs for
full details.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Extended support for configuring PGD-S clusters.</summary><hr/><p>TPA now supports a full set of dedicated options for configuring a
PGD-S cluster.
The <code>--layout</code> option can be set to <code>standard</code> for a one-location or
<code>near-far</code> for a two-location layout.
The <code>--add-subscriber-only-nodes</code> option adds up to 10 subscriber-only
nodes.
The <code>--read-write-port</code>, <code>--read-only-port</code>, <code>--http-port</code>, and <code>--use-https options</code> control Connection Manager's ports and HTTP API.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Introduced a <code>pgd-proxy-config</code> hook.</summary><hr/><p>Introduced a hook to run tasks from <code>pgd-proxy-config.yml</code> at the end of PGD
Proxy config, after core directories and files are set but before the PGD Proxy service starts.
Developers of the hook must ensure task idempotency. This hook will come in handy
for various post-configuration tasks e.g. making adjustments to PGD Proxy configuration
not supported by TPA interface and other relevant cluster-specific settings.</p>
</details></td><td>49911</td></tr>
<tr><td><details><summary>Added three <code>release.vip.*</code> properties for EFM 5.1 and above.</summary><hr/><p>Starting with EFM 5.1, there will be three new properties that control
the timing of when the VIP is released by the primary agent (if a VIP is used).
This allows the user to avoid having the VIP released at the same time new database
connections are being made, which can lead to connection failures and a failure
of switchover in some environments. The new properties are: <code>release.vip.background</code>
<code>release.vip.pre.wait</code> and <code>release.vip.post.wait</code>.</p>
</details></td><td></td></tr>
<tr><td><details><summary>TPA now allows the RSA key size to be set for certificates.</summary><hr/><p>Added a variable <code>postgres_rsa_key_size</code>, (default value is 2048)
that can configure the size of the RSA key size for self-signed TLS keys and certificates
later used on the docker clusters.</p>
<p>Added a variable called <code>pem_rsa_key_size</code>,
(default value is 4096) that can configure the size of the RSA key size for self-signed
TLS key and certificate later used on the PEM Server.</p>
<p>Added a variable called <code>pem_db_ca_certificate_key_size</code>, (default value is 4096) that can configure the
size of the database CA RSA key size used on the PEM Server.</p>
<p>Added a variable called <code>ha_proxy_dhparams_key_size</code>, (default value is 2048) that can configure
the size of the RSA key size used for ssl-dh-param-file within haproxy. Added
a variable called <code>openvpn_rsa_key_size</code>, (default value is 4096) that can configure
the size of the RSA key size for self-signed TLS key and certificate later used
on OpenVPN.</p>
<p>Added a variable called <code>openvpn_dhparams_numbits_size</code>, (default
value is 2048) that can configure the number of the DH <code>numbits</code> in <code>dh2048.pem</code>.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Documented how TPA generates Postgres server TLS certificates and keys and how to override this.</summary><hr/><p>Previously, the TPA docs mentioned that TPA generates default certs but
not their names or paths. This change adds that information and also explains
how to replace these files with your own. We now document the previously undocumented
<code>ssl_*</code> cluster vars for this purpose. The new content is placed in <code>postgresql.conf.md</code>
and linked from the original location <code>postgres_user.md</code>.</p>
</details></td><td>52049</td></tr>
</tbody></table>


## Changes

<table class="table w-100"><thead><tr><th>Description</th><th width="10%">Addresses</th></tr></thead><tbody>
<tr><td><details><summary>TPA now supports EPAS clusters with repmgr as failover manager.</summary><hr/><p>Until now, this combination wasn't supported by EDB. This support starts with EPAS
14 and is available as of now up to EPAS 17.</p>
</details></td><td></td></tr>
</tbody></table>


## Bug Fixes

<table class="table w-100"><thead><tr><th>Description</th><th width="10%">Addresses</th></tr></thead><tbody>
<tr><td><details><summary>Fixed an issue whereby backup wasn't configured in PGD 6 clusters.</summary><hr/><p>Previously, when creating a new configuration for PGD 6, the barman node created wasn't
used by any node. This change ensures that when running &quot;tpaexec configure&quot; for
PGD6 based architectures, each barman node configured will be used by a BDR node
in the same location.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Fixed support for <code>update_host</code> variable on PGD-Always-ON.</summary><hr/><p>TPA is now able to honor the <code>update_hosts</code> option for minor
Postgres and minor PGD5 upgrades when using PGD-Always-ON
architecture. By specifying the <code>update_hosts</code> option in the
<code>tpaexec upgrade</code> command, TPA will now upgrade this subset of nodes
and leave the remaining nodes on the currently installed versions.
This allows for more controlled upgrade that can be split into
multiple runs in order to better control and test the cluster along
the upgrade process. When using this feature keep in mind best
practices such as updating write leaders last and testing in a
dev/staging environment first.</p>
</details></td><td>52558, 45181</td></tr>
<tr><td><details><summary>HAProxy health checks now correctly use HTTPS for SSL-enabled Patroni clusters.</summary><hr/><p>Fixed a bug whereby HAProxy was incorrectly configured to use HTTP
for health checks against Patroni nodes, even when the Patroni REST API was secured
with SSL (<code>patroni_ssl_enabled: true</code>). This misconfiguration caused health checks
to fail, leading HAProxy to mark healthy Patroni nodes as down. The HAProxy configuration
logic has been updated to use <code>check-ssl verify none</code> when <code>patroni_ssl_enabled</code>
is true, ensuring that health checks are correctly performed over HTTPS.'</p>
</details></td><td></td></tr>
<tr><td><details><summary>Fixed an issue with <code>pgaudit</code> extension when used with <code>edbpge</code> Postgres.</summary><hr/><p>Previously, adding <code>pgaudit</code> to the list of Postgres extensions with the
<code>edbpge</code> Postgres flavour would fail because the dictionary for handling recognized
extensions was missing an entry for <code>edbpge</code> and its corresponding package names.
This entry has been added, and additional logic incorporated to handle naming change
for <code>pgaudit</code> packages from version 16 onwards.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Fixed an issue where global proxy routing was not set up correctly in PGD 5.9.</summary><hr/><p>When creating a new configuration file via 'tpaexec configure -a PGD-Always-ON
--pgd-proxy-routing global (...)', the configuration by default will create a
top group node with enable_proxy_routing &amp; enable_raft equal to true, and subgroups
enable_proxy_routing &amp; enable_raft equal to false. When creating a new configuration
file via 'tpaexec configure -a PGD-Always-ON --pgd-proxy-routing local (...)',
the configuration by default will create a top group node with enable_proxy_routing
equal to false &amp; enable_raft equal to true, subgroups have enable_proxy_routing
&amp; enable_raft equal to true. and subgroups enable_proxy_routing &amp; enable_raft
equal to false.</p>
</details></td><td></td></tr>
<tr><td><details><summary>TPA will now correctly skip the <code>postgres/pgpass</code> task on PEM-agent Barman nodes</summary><hr/><p>The <code>postgres/pgpass</code> task runs on Postgres nodes with the pem-agent
role in order to add the <code>postgres_user</code> to the <code>.pgpass</code> file in
this user's home directory. In previous versions, the task would
also attempt to run on Barman nodes that have the pem-agent role.
This would fail since the directory does not exist. This task is now
excluded for Barman nodes.</p>
</details></td><td></td></tr>
</tbody></table>


