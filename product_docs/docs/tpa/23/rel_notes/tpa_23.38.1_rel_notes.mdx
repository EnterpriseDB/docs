---
title: Trusted Postgres Architect 23.38.1 release notes
navTitle: Version 23.38.1
originalFilePath: product_docs/docs/tpa/23/rel_notes/src/tpa_23.38.1_rel_notes.yml
editTarget: originalFilePath
---

Released: 25 June 2025

Trusted Postgres Architect 23.38.1 is a bug-fix release that resolves the following issues:

## Bug Fixes

<table class="table w-100"><thead><tr><th>Description</th><th width="10%">Addresses</th></tr></thead><tbody>
<tr><td><details><summary>Fixed an issue with the configure command for PGD6 using bare platform.</summary><hr/><p>Fixed a bug with tpaexec configure command on the newly released architecture
for PGD6 (PGD-S and PGD-X) whereby trying to generate a cluster using <code>--platform bare</code> would result in an Unknown Platform error. This fix ensures that the configure
command successfully generates a PGD6 configuration file for the bare platform.</p>
</details></td><td>49673</td></tr>
<tr><td><details><summary>Fixed an issue whereby pgpass_users were not correctly added to the .pgpass file.</summary><hr/><p>Previously, any user in the <code>postgres_users</code> list specified with <code>generate_password: true</code> AND included in the <code>pgpass_users</code> list would NOT be added to the <code>~postgres/.pgpass</code>
file on the initial deploy because the user's password did not yet exist when
the pgpass task was executed, thus the user was skipped. This is fixed by invoking
the pgpass task once more after all the Postgres users have been created. The
<code>repmgr</code> and <code>replication</code> users were previously included in the <code>default_pgpass_users</code>
list. They are now added to <code>pgpass_users</code> and hence to the .pgpass file as required
by the replication manager in use. The <code>postgres_user</code> (<code>postgres</code> or <code>enterprisedb</code>
by default) is still part of the <code>default_pgpass_users</code> list. If this is overridden
by a <code>pgpass_users</code> list in <code>config.yml</code> that does NOT include <code>postgres_user</code>,
a PEM-enabled cluster will fail to register agents as it needs the encrypted <code>postgres_user</code>
password. This is fixed by adding the <code>postgres_user</code> to the <code>~postgres/.pgpass</code>
file as part of the PEM agent tasks.</p>
</details></td><td></td></tr>
<tr><td><details><summary>Fixed an issue whereby an invalid cluster_vars dictionary would lead to a failed deploy or an unexpected configuration.</summary><hr/><p>Previously, if an invalid dictionary is set as the <code>cluster_vars</code> dictionary
in <code>config.yml</code> (such as <code>cluster_vars</code> variables referencing other <code>cluster_vars</code>
variables), TPA would swallow any Ansible errors by falling back to the default
value of an empty dictionary. This resulted in every <code>cluster_vars</code> variable being
undefined, so each was set to it's TPA-default value. The resulting cluster would
be entirely different than what the user specified in their <code>config.yml</code> file.
This is fixed by asserting that the <code>cluster_vars</code> dictionary is defined and non-empty
when the configuration file is loaded. Also as a final bailout, the <code>cluster_vars</code>
variable now no longer defaults to an empty dictionary. This allows Ansible to
throw an error when creating <code>group_vars</code> and terminate.</p>
</details></td><td></td></tr>
</tbody></table>


