---
navTitle: Installation
title: TPA installation
originalFilePath: INSTALL.md

---

To use TPA, you need to install tpaexec and run the `tpaexec setup`
command. This document explains how to install TPA packages.

We publish TPA packages for Debian 10 (buster), Ubuntu 22.04 (jammy), Ubuntu 20.04
(focal), Ubuntu 18.04 (bionic), RHEL/CentOS 7.x and 8.x, Rocky 8.x and AlmaLinux 8.x. These
distributions provide a usable Python 3.6+ environment out of the box,
which TPA requires. (However, TPA supports a wider range of
[distributions on target instances](reference/distributions).)

## What time is it?

Please make absolutely sure that your system has the correct date and
time set, because various things will fail otherwise. For example:

```bash
sudo ntpdate pool.ntp.org
```

## Prerequisites

If you are behind an HTTPS proxy, see [How to install RPM/APT repositories through a HTTPS proxy](https://techsupport.enterprisedb.com/kb/a/how-to-install-rpm-apt-repositories-through-a-https-proxy/).

### Superuser access

Configuring a repository and installing packages will require root access. We use `sudo` here  to indicate which commands need root privileges. You may use any other means to run the commands as root.

### Repository access token

Go to [EDB repositories](https://www.enterprisedb.com/repos-downloads), and copy your repo token - you'll use it in the next step.

### Configure the repository (Red Hat and derivatives)

Replace `<token>` with the access token you obtained in the previous step and run:

```shell
curl -1sLf 'https://downloads.enterprisedb.com/<token>/postgres_distributed/setup.rpm.sh' | sudo -E bash
```

If you'd prefer to see what you're about to execute, you can download the script without passing it to a root shell:

```shell
curl -1sLf 'https://downloads.enterprisedb.com/<token>/postgres_distributed/setup.rpm.sh'
```
### Configure the repository (Debian and Ubuntu)

Replace `<token>` with the access token you obtained in the previous step and run:

```shell
curl -1sLf 'https://downloads.enterprisedb.com/<token>/postgres_distributed/setup.deb.sh' | sudo -E bash
```

If you'd prefer to see what you're about to execute, you can download the script without passing it to a root shell:

```shell
curl -1sLf 'https://downloads.enterprisedb.com/<token>/postgres_distributed/setup.deb.sh'
```

## Packages

```bash
# Debian or Ubuntu
sudo apt-get install tpaexec
```
```bash
# RedHat, Rocky or AlmaLinux
sudo yum install tpaexec
```

This will install TPA into `/opt/EDB/TPA`. It will also
ensure that other required packages (e.g., Python 3.6 or later) are
installed.

## Python environment

Next, run `tpaexec setup` to create an isolated Python environment and
install the correct versions of all required modules.

```bash
sudo /opt/EDB/TPA/bin/tpaexec setup
```

You must run this as root because it writes to `/opt/EDB/TPA`,
but the process will not affect any system-wide Python modules you may
have installed (including Ansible).

Add `/opt/EDB/TPA/bin` to the `PATH` of the user who will
normally run `tpaexec` commands. For example, you could add this to
your .bashrc or equivalent shell configuration file:

```bash
export PATH=$PATH:/opt/EDB/TPA/bin
```

### Installing without network access

When you run `tpaexec setup`, it will ordinarily download the Python
packages from the network. The `tpaexec-deps` package (available from
the same repository as tpaexec) bundles everything that would have been
downloaded, so that they can be installed without network access. Just
install the package before you run `tpaexec setup` and the bundled
copies will be used automatically.

## Verification

Once you're done with all of the above steps, run the following command (as a non-root user)
to verify your local installation:

```bash
tpaexec selftest
```

If that command completes without any errors, your TPA installation
is ready for use.

## Upgrading

To upgrade to a later release of TPA, you must:

1.  Install the latest `tpaexec` package
2.  Install the latest `tpaexec-deps` package (if required; see above)
3.  Run `tpaexec setup` again

If you have subscribed to the TPA package repository as described
above, running `apt-get update && apt-get upgrade` or `yum update`
should install the latest available versions of these packages. If not,
you can install the packages by any means available.

We recommend that you run `tpaexec setup` again whenever a new version
of `tpaexec` is installed. Some new releases may not strictly require
this, but others will not work without it.

## Ansible community support

TPA now supports ansible community, you may choose to use it by
using `--use-community-ansible` option during `tpaexec setup`, default
will be to use the legacy 2ndQuadrant/ansible fork. This will change in
a future release, support for 2ndQuadrant/ansible will be dropped and
community ansible will become the new default.

notable difference:

-   change the `--skip-flags` options to community behavior where a
    task will be skipped if part of the list given to the `--skip-tags`
    option even if it is also tagged with special tag `always`.
    TPA expects all tasks tagged with `always` to be run to ensure
    a complete deployment, therefor `--skip-tags` should not be used when
    using community ansible.
