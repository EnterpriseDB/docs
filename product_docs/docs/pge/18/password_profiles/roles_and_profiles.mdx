---
title: "Roles and profiles"
description: "How to attach/detach roles and profiles and manage role account status."
---

The `password_profile` extension allows you to manage user roles and their associated profiles effectively. Each role can be assigned a specific profile that dictates the password management rules applicable to that role.

## Attach role and profile

When a role is created, it can be associated with a password profile using the `PG_ATTACH_ROLE_PROFILE` API. This association ensures that the password management rules defined in the profile are enforced for the role.

```sql
PASSWORD_PROFILE.PG_ATTACH_ROLE_PROFILE('role_name', 'profile_name');
```

This API accepts following parameters:

- `role_name` &mdash; Name of the role to which the profile is being attached.
- `profile_name` &mdash; Name of the password profile to attach to the role.

## Detach role and profile

When a role is no longer needed or requires a different profile, it can be unassociated from its current profile using the `PG_DETACH_ROLE_PROFILE` API.

```sql
PASSWORD_PROFILE.PG_DETACH_ROLE_PROFILE('role_name');
```

This API accepts following parameters:

- `role_name` &mdash; Name of the role from which the profile is being detached.

## Role account status

You can check the status of a role's account by using the `PG_GET_ROLE_STATUS` API that is attached to the profile.

```sql
PASSWORD_PROFILE.PG_GET_ROLE_STATUS('role_name');

or

PASSWORD_PROFILE.PG_GET_ROLE_STATUS('roleid');
```

This API accepts either parameter:

- `role_name` &mdash; Name of the role whose account status is being queried.

- `roleid` &mdash; ID of the role whose account status is being queried.


## Lock/unlock a role account

You can lock or unlock a role's account using the `PG_ROLE_ACCOUNT_LOCK` API. This action prevents the role from logging in until it is unlocked.

```sql
PASSWORD_PROFILE.PG_ROLE_ACCOUNT_LOCK('role_name', lock);
```

This API accepts following parameters:

- `role_name` &mdash; Name of the role whose account is to be locked or unlocked.
- `lock` &mdash; If true, lock the role's account; if false, unlock the role's account.

## Set a role password to expire

You can set a role's password to expire using the `PG_ROLE_PASSWORD_EXPIRE` API. This action forces the role to change its password upon the next login.

```sql
PASSWORD_PROFILE.PG_ROLE_PASSWORD_EXPIRE('role_name');
```

This API accepts following parameters:

- `role_name` &mdash; Name of the role whose password is to be expired.

## See also

[`CREATING A PROFILE`](creating_a_profile), [`MODIFYING A PROFILE`](modifying_a_profile), [`REMOVING A PROFILE`](removing_a_profile)