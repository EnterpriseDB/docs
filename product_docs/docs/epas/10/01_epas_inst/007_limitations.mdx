---
title: Limitations
---
 - The pg\_upgrade utility cannot upgrade a partitioned table if a foreign key refers to the partitioned table.
 - If you are upgrading from the version 9.4 server or a lower version of Advanced Server, and you use partitioned tables that include a SUBPARTITION BY clause, you must use pg\_dump and pg\_restore to upgrade an existing Advanced Server installation to a later version of Advanced Server. To upgrade, you must:

1.  Use pg\_dump to preserve the content of the subpartitioned table.
2.  Drop the table from the Advanced Server 9.4 database or a lower version of Advanced Server database.
3.  Use pg\_upgrade to upgrade the rest of the Advanced Server database to a more recent version.
4.  Use pg\_restore to restore the subpartitioned table to the latest upgraded Advanced Server database.

