---
title: "NLS functions"
navigation:
- nls_upper
- nls_lower
- nls_initcap
---

EDB Postgres Advanced Server version 17 and later provides the support for NLS functions. These functions uses the `edb_redwood_nls.config` file to map the NLS parameters with an equivalent ICU or libc's collate. 

## NLS config file

The `edb_redwood_nls.config` file maintains the list of NLS parameters mapping with an equivalent ICU or libc's collate. The NLS parameters and an equivalent collates are listed in each row in the config file separated by commas respectively. The config file contains a default list of NLS parameters and an equivalent collate pairs. 

<details><summary>The default list of NLS parameters mapping with an equivalent collates in the NLS config file:</summary>
ARABIC,"pg_catalog"."default"
ARABIC_MATCH,"pg_catalog"."default"
ARABIC_ABJ_SORT,"pg_catalog"."default"
ARABIC_ABJ_MATCH,"pg_catalog"."default"
ASCII7,"pg_catalog"."default"
AZERBAIJANI,"pg_catalog"."default"
XAZERBAIJANI,"pg_catalog"."default"
BENGALI,"pg_catalog"."default"
BIG5,"pg_catalog"."default"
BINARY,"pg_catalog"."default"
BULGARIAN,"pg_catalog"."default"
CATALAN,"pg_catalog"."default"
XCATALAN,"pg_catalog"."default"
CROATIAN,"pg_catalog"."default"
XCROATIAN,"pg_catalog"."default"
CZECH,"pg_catalog"."default"
XCZECH,"pg_catalog"."default"
CZECH_PUNCTUATION,"pg_catalog"."default"
XCZECH_PUNCTUATION,"pg_catalog"."default"
DANISH,"pg_catalog"."default"
XDANISH,"pg_catalog"."default"
DUTCH,"pg_catalog"."default"
XDUTCH,"pg_catalog"."default"
EBCDIC,"pg_catalog"."default"
EEC_EURO,"pg_catalog"."default"
EEC_EUROPA3,"pg_catalog"."default"
ESTONIAN,"pg_catalog"."default"
FINNISH,"pg_catalog"."default"
FRENCH,"pg_catalog"."default"
XFRENCH,"pg_catalog"."default"
GERMAN,"pg_catalog"."default"
XGERMAN,"pg_catalog"."default"
GERMAN_DIN,"pg_catalog"."default"
XGERMAN_DIN,"pg_catalog"."default"
GBK,"pg_catalog"."default"
GREEK,"pg_catalog"."default"
HEBREW,"pg_catalog"."default"
HKSCS,"pg_catalog"."default"
HUNGARIAN,"pg_catalog"."default"
XHUNGARIAN,"pg_catalog"."default"
ICELANDIC,"pg_catalog"."default"
INDONESIAN,"pg_catalog"."default"
ITALIAN,"pg_catalog"."default"
LATIN,"pg_catalog"."default"
LATVIAN,"pg_catalog"."default"
LITHUANIAN,"pg_catalog"."default"
MALAY,"pg_catalog"."default"
NORWEGIAN,"pg_catalog"."default"
POLISH,"pg_catalog"."default"
PUNCTUATION,"pg_catalog"."default"
XPUNCTUATION,"pg_catalog"."default"
ROMANIAN,"pg_catalog"."default"
RUSSIAN,"pg_catalog"."default"
SLOVAK,"pg_catalog"."default"
XSLOVAK,"pg_catalog"."default"
SLOVENIAN,"pg_catalog"."default"
XSLOVENIAN,"pg_catalog"."default"
SPANISH,"pg_catalog"."default"
XSPANISH,"pg_catalog"."default"
SWEDISH,"pg_catalog"."default"
SWISS,"pg_catalog"."default"
XSWISS,"pg_catalog"."default"
TURKISH,"pg_catalog"."default"
XTURKISH,"pg_catalog"."default"
UKRAINIAN,"pg_catalog"."default"
UNICODE_BINARY,"pg_catalog"."default"
VIETNAMESE,"pg_catalog"."default"
WEST_EUROPEAN,"pg_catalog"."default"
XWEST_EUROPEAN,"pg_catalog"."default"
CANADIAN_M,"pg_catalog"."default"
DANISH_M,"pg_catalog"."default"
FRENCH_M,"pg_catalog"."default"
GENERIC_M,"pg_catalog"."default"
JAPANESE_M,"pg_catalog"."default"
KOREAN_M,"pg_catalog"."default"
SPANISH_M,"pg_catalog"."default"
THAI_M,"pg_catalog"."default"
SCHINESE_RADICAL_M,"pg_catalog"."default"
SCHINESE_STROKE_M,"pg_catalog"."default"
SCHINESE_PINYIN_M,"pg_catalog"."default"
TCHINESE_RADICAL_M,"pg_catalog"."default"
TCHINESE_STROKE_M,"pg_catalog"."default"

</details>

<br/>

You can add a new collation as `<schema_name>.<collation>` from `pg_collation` catalog mapped to a valid NLS parameter in the NLS config file. Add this mapping before using the NLS parameter in the NLS functions. Add a new entry to the config file using the `edb_nls_cf_insert` function. Reload the config file after adding a new entry using `edb_nls_cf_reload` function. 

**Usage of NLS config file**

- Each client session reads the config file and stores the NLS parameters and collation values in in-mem HASH data structure when any of the NLS function is called for the first time.

- The config file is read row by row while parsing the SQL statement including the NLS functions. 

- The changes done to the config file in a session updates the in-mem HASH data structure with new mappings. The changes done in a session gets updated in other sessions only after reloading the config file or after the other sessions are re-started.

- It is recommended to clean up the in-mem HASH during shutdown of the databases. 


The available functions for managing the NLS config file are listed in the following table:

| Function                                                  | Return type | Description                                                                                                    |
|-----------------------------------------------------------|-------------|----------------------------------------------------------------------------------------------------------------|
| `edb_nls_cf_insert(nls TEXT, collation TEXT)`             | VOID        | Adds a new entry in the NLS config file with the given NLS parameter and a mapping collate.                    |
| `edb_nls_cf_reload()`                                     | VOID        | Reloads the NLS config file and updates the NLS parameter and a mapping collate in in-mem HASH data structure. |
| `edb_nls_cf_hash_dump(OUT nls TEXT, OUT collationid INT)` | INT         | Dumps the NLS parameter and a mapping collate HASH contents on the client session.                             |
| `edb_nls_cf_dump(OUT nls TEXT, collation OUT TEXT)`       | INT         | Dumps the existing NLS config file contents on the client session.                                             |


**Supported NLS functions**

- [NLS_UPPER](nls_upper)

- [NLS_LOWER](nls_lower)

- [NLS_INITCAP](nls_initcap)


## Examples

This example shows how to add a new entry in the NLS config file:

```
SELECT edb_nls_cf_insert('xgerman', 'de-x-icu');
__OUTPUT__
 edb_nls_config_file_insert 
----------------------------
 SUCCESS: Entry Inserted
(1 row)
```

This example shows how to reload the NLS config file:

```
SELECT edb_nls_cf_reload();
```
