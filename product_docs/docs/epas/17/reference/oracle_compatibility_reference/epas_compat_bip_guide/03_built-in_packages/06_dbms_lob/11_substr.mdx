---
title: "SUBSTR"
redirects:
  - /epas/latest/epas_compat_bip_guide/03_built-in_packages/06_dbms_lob/11_substr/ #generated for docs/epas/reorg-role-use-case-mode
---

The `SUBSTR` function returns a portion of a large object or BFILE arting at the specified offset using SUBSTR.

```sql
<data> { RAW | VARCHAR2 } SUBSTR(<lob_loc> { BLOB | CLOB }
   [, <amount> INTEGER [, <offset> INTEGER ]])

SUBSTR(<file_loc> IN { BFILE }, <amount> IN INTEGER, <offset> IN INTEGER)
```

## Parameters

`lob_loc`

 Large object locator of the large object to read.

`file_loc`

 File locator for the BFILE to read.

`amount`

 Number of bytes/characters to return. Default is 32,767.

`offset`

 Position in the large object to begin returning data. The first byte/character is position 1. The default is 1.

`data`

 Returned portion of the large object to read. If `lob_loc` is a `BLOB` or `file_loc` is a `BFILE`, the return data type is `RAW`. If `lob_loc` is a `CLOB`, the return data type is `VARCHAR2`.

## Example

!!! sql
CREATE OR REPLACE PROCEDURE substringBFILE_proc IS
   File_loc         BFILE;
   Position        INTEGER := 1;
   Buffer          RAW(32767);
BEGIN
   /* Select the LOB: */  
   SELECT p2 INTO File_loc FROM bfiletest 
      WHERE p1=20;
   /* Open the BFILE: */  
   DBMS_LOB.OPEN(File_loc, DBMS_LOB.LOB_READONLY);
   Buffer := DBMS_LOB.SUBSTR(File_loc, 2, position);
   DBMS_OUTPUT.PUT_LINE(utl_raw.cast_to_varchar2(Buffer)); 
   /* Close the BFILE: */  
   DBMS_LOB.CLOSE(File_loc);
END;
!!!