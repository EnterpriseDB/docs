---
title: "Invoking pg_upgrade"
---



When invoking `pg_upgrade`, you must specify the location of the old and new cluster's `PGDATA` and executable (`/bin`) directories, as well as the name of the Advanced Server superuser, and the ports on which the installations are listening. A typical call to invoke `pg_upgrade` to migrate from Advanced Server 11 to Advanced Server 12 takes the form:

``` text
pg_upgrade
--old-datadir <path_to_11_data_directory>
--new-datadir <path_to_12_data_directory>
--user <superuser_name>
--old-bindir <path_to_11_bin_directory>
--new-bindir <path_to_12_bin_directory>
--old-port <11_port> --new-port <12_port>
```

Where:

[--old-datadir ](#path_to_11_data_directory)

> Use the `--old-datadir` option to specify the complete path to the `data` directory within the Advanced Server 11 installation.

[--new-datadir ](#path_to_12_data_directory)

> Use the `--new-datadir` option to specify the complete path to the `data` directory within the Advanced Server 12 installation.

[--username ](#superuser_name)

> Include the `--username` option to specify the name of the Advanced Server superuser. The superuser name should be the same in both versions of Advanced Server. By default, when Advanced Server is installed in Oracle mode, the superuser is named `enterprisedb`. If installed in PostgreSQL mode, the superuser is named `postgres`.
> 
> If the Advanced Server superuser name is not the same in both clusters, the clusters will not pass the `pg_upgrade` consistency check.

[--old-bindir ](#path_to_11_bin_directory)

> Use the `--old-bindir` option to specify the complete path to the `bin` directory in the Advanced Server 11 installation.

[--new-bindir ](#path_to_12_bin_directory)

> Use the `--new-bindir` option to specify the complete path to the `bin` directory in the Advanced Server 12 installation.

[--old-port ](#11_port)

> Include the `--old-port` option to specify the port on which Advanced Server 11 listens for connections.

[--new-port ](#12_port)

> Include the `--new-port` option to specify the port on which Advanced Server 12 listens for connections.

<div class="toctree" data-maxdepth="3">

command_line_options_reference

</div>
