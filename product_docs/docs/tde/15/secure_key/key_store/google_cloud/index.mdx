---
title: Using Google Cloud KMS
description: Learn how to secure your encryption key with an Cloud Key Management Service key.
deepToC: true
---

## Configuration example

Create a key with [Google Cloud KMS](https://cloud.google.com/kms/docs):

```shell
gcloud kms keys create pg-tde-master-1 --location=global --keyring=pg-tde --purpose=encryption
```

Use the `gcloud kms` command with the `pg-tde-master-1` key to wrap and unwrap the data encryption key:

```shell
PGDATAKEYWRAPCMD='gcloud kms encrypt --plaintext-file=- --ciphertext-file=%p --location=global --keyring=pg-tde --key=pg-tde-master-1'
PGDATAKEYUNWRAPCMD='gcloud kms decrypt --plaintext-file=- --ciphertext-file=%p --location=global --keyring=pg-tde --key=pg-tde-master-1'
```
