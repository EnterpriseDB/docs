---
title: "Choosing a deployment architecture"
redirects:
 - ../efm_pgpool_ha_guide
 - 01_introduction
 - 02_architecture
legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-failover-manager/user-guides/high-availability-scalability-guide/4.0/index.html"
  - "/edb-docs/d/edb-postgres-failover-manager/user-guides/high-availability-scalability-guide/4.0/conclusion.html"
  - "/edb-docs/d/edb-postgres-failover-manager/user-guides/high-availability-scalability-guide/4.0/introduction.html"
  - "/edb-docs/d/edb-postgres-failover-manager/user-guides/high-availability-scalability-guide/4.0/genindex.html"
  - "/edb-docs/d/edb-postgres-failover-manager/user-guides/high-availability-scalability-guide/4.1/genindex.html"
  - "/edb-docs/d/edb-postgres-failover-manager/user-guides/high-availability-scalability-guide/4.1/introduction.html"
  - "/edb-docs/d/edb-postgres-failover-manager/user-guides/high-availability-scalability-guide/4.1/conclusion.html"
  - "/edb-docs/d/edb-postgres-failover-manager/user-guides/high-availability-scalability-guide/4.1/index.html"
---


Failover Manager is a high-availability module that monitors the health
of a Postgres streaming replication cluster and verifies failures
quickly. When a database failure occurs, Failover Manager can
automatically promote a streaming replication standby node into a
writable primary node. This capability ensures continued performance and protects
against data loss with minimal service interruption.

A Failover Manager cluster is made up of Failover Manager processes
that reside on the following hosts on a network:

-   A primary node is the primary database server that is servicing
    database clients.

-   One or more standby nodes are streaming replication servers
    associated with the primary node.

-   The witness node confirms assertions of either the primary or a
    standby in a failover scenario. If, during a failure situation, the
    primary is in a partition with half or more of the nodes,
    it stays primary. As such, Failover Manager supports running in
    a cluster with an even number of agents.

Failover Manager provides various high availability options for EDB
Postgres Advanced Server using the Postgres connection poolers and
connection libraries. These options have implications for a
high-availability architecture.

To ensure the high availability of your database, you can combine core features of Failover Manager with the Postgres connection libraries (client connect failover) and connection poolers.

With the capabilities of Failover Manager, EDB has designed four basic
architectures to run a high-availability environment:

1. [Failover Manager using VIP (virtual IP)](03_efm_vip): Failover Manager has a key
capability to manage VIP addresses out of the box. VIP addresses
allow applications to connect to a single IP address that is being
routed to the primary database server. This architecture is the most
basic solution to run when VIP addresses are available in your
environment.

2. [Failover Manager using client connect failover](04_efm_client_connect_failover):
PostgreSQL client libraries like libpq and jdbc allow for client
connection failover. With client connection failover, the connection
string contains multiple servers (host=srv1,srv2) and the
client library loops over the available hosts to find a
connection that is available and capable of read-write operations.
This capability allows clients to follow the master during a
switchover. This solution doesn't rely on virtual IP addresses. You can use it in every environment 
where such client configurations can be set.

3. [Failover Manager with PgBouncer](05_efm_pgbouncer): PgBouncer adds
capabilities such as connection pooling and the option to halt traffic. 
You can also use it as a proxy between the client and the Postgres database server. 
By leveraging the integration options in Failover Manager to run reconfiguration of PgBouncer during a
failover, you can use PgBouncer to route the traffic to the correct
primary database server.

4. [Failover Manager with Pgpool](06_efm_pgpool): Pgpool-II is
another tool used as a proxy between the client and the
Postgres database server. Pgpool-II adds capabilities such
as running in cluster mode with a Watchdog, managing VIPs, and
read-only scalability. Failover Manager has native capabilities to
integrate with Pgpool-II to redirect traffic to another primary
during Database failover operations.

These features are supported in each of the
architectures:

**Client connect failover**

|Features | Failover Manager with VIP | Failover Manager with client connect failover | Failover Manager with with PgBouncer | Failover Manager with with Pgpool |
|---------------------------------------- | ----------------------- | ----------------------------------------- | ----------------------- | ---------------------|
|Connection pooling | | | Yes | Yes |
|Runs on cloud (no VIP) | | Yes | Yes | Yes |
|Halt traffic option | | | Yes | |
|Read-only scalability | | Yes (using multiple connection factories) | | Yes |
|Clustered proxy | | | | Yes |
|Proxy integration | | | ssh | PCP |
|Minimum servers required | 3 | 3 | 5 | 6 |
|Complexity | Low | Low | Medium | High |
|Network hops | 1 | 1 | | |
|Failover duration | Low | Medium | Low | Low |

