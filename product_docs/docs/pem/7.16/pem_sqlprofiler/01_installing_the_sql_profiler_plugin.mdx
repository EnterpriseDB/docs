---
title: "Installing the SQL Profiler Plugin"
---

You must install the plugin on each server on which you wish to use SQL Profiler. For example, if you have a host running PostgreSQL 9.6 and PostgreSQL 10, you must install two versions of the plugin, one for each server.

Follow the installation steps listed below to install the plugin for PostgreSQL before continuing to the `Configuration` section. If you are using Advanced Server, you can skip installation and move ahead to the `Configuration` section.

You can use the graphical installer to install any version of SQL Profiler on the Windows platform. On Linux, use an RPM package to install the SQL Profiler. For detailed information about configuring the EDB repository for your host platform, see the [PEM Linux Installation Guide](https://www.enterprisedb.com/docs/pem/latest/pem_inst_guide_linux/04_installing_postgres_enterprise_manager/03_installing_pem_server_on_linux/).

## Installing SQL Profiler on Windows

To invoke the SQL Profiler graphical installer, assume `Administrator` privileges, navigate into the directory that contains the installer, and double-click the installer icon. The SQL Profiler installer welcomes you to the Setup Wizard.

![The SQL Profiler Installer Welcome dialog](../images/installing_pem_sql_profiler_plugin_windows_welcome.png)

Click `Next` to continue to the `License Agreement`.

![The SQL Profiler License Agreement](../images/installing_pem_sql_profiler_plugin_windows_license_agreement.png)

Carefully review the license agreement before highlighting the appropriate radio button and accepting the agreement; click `Next` to continue to the `Installation Directory` dialog.

![The PostgreSQL Installation Directory](../images/installing_pem_sql_profiler_plugin_windows_installation_directory.png)

Specify an alternate location for the installation directory, or accept the default location and click `Next` to continue.

![Ready to Install](../images/installing_pem_sql_plugin_windows_ready_to_install.png)

The wizard is now ready to install the SQL Profiler plugin. Click `Next` to continue.

![Installing the SQL Profiler plugin](../images/installing_pem_sql_profiler_plugin_windows_in_progress.png)

The SQL Profiler plugin installer displays progress bars as it copies files to your system.

![The SQL Profiler installation is complete](../images/installing_pem_sql_profiler_plugin_windows_finish.png)

When the installation is complete, the SQL Profiler plugin is ready to be configured.

## Using an RPM Package to Install SQL Profiler

!!! Note
    You may be required to add the `sslutils` package to your PostgreSQL database servers before installing SQL Profiler.

If you have already configured the EDB repository on your system, you can use `yum` or `dnf` to install SQL Profiler:

```text
yum install postgresql<X>-sqlprofiler

or

dnf install postgresql<X>-sqlprofiler
```

Where, `<X>` is the version of your Postgres installation.

For detailed information about configuring the EDB repository, please see the [PEM Linux Installation Guide](https://www.enterprisedb.com/docs/pem/latest/pem_inst_guide_linux/04_installing_postgres_enterprise_manager/03_installing_pem_server_on_linux/).

## Installing SQL Profiler on Debian/Ubuntu

!!! Note
    You may be required to add the `sslutils` package to your PostgreSQL database servers before installing SQL Profiler.

You can use an `apt` command to install SQL Profiler using DEB on Debian 9.x or Ubuntu 18; assume root privileges and enter:

```text
apt install postgresql-<X>-sqlprofiler
```

Where, `<X>` is the version of your Postgres installation.

When the installation is complete, the SQL Profiler plugin is ready to be configured.

## Configuring SQL Profiler

The SQL Profiler plugin is not automatically enabled when the installation process completes. This allows you to restart the server at a convenient time, and prevents the plugin from being loaded unnecessarily on systems where it is not required on a continual basis.

Use the following steps to enable the plugin:

1.  Edit the `postgresql.conf` file on the server you wish to profile, modifying the `shared_preload_libraries` parameter as shown below:

    ```text
    shared_preload_libraries = '$libdir/sql-profiler'
    ```

2.  Restart the Postgres server.

3.  Using the `Query Tool` or the `psql` command line interface, run the `sql-profiler.sql` script in the database specified as the `Maintenance Database` on the server you wish to profile. If you are using:

    -   PostgreSQL, the default maintenance database is `postgres`.
    -   Advanced Server, the default maintenance database is `edb`.

    To use the PEM Query Tool to run the script, highlight the name of the maintenance database in the `Browser` tree control, and navigate through the `Tools` menu to select `Query tool`. When the Query Tool opens, use the `Open` option on the `Files` menu to open a web browser and navigate to the `sql-profiler.sql` script. By default, the `sql-profiler.sql` script is located in the `contrib` folder, under your Postgres installation.

    When the script opens in the `SQL Editor` panel of the Query Tool, highlight the content of the script in the SQL Editor and select the `Execute` option from the `Query` menu (or click the `Execute` icon) to invoke the script and configure SQL Profiler.

    You can also use the psql command line to invoke the configuration script. The following command uses psql to invoke the `sql-profiler.sql` script on an Advanced Server database on a Linux system:

    ```text
    $ /usr/edb/as<x>/bin/psql -U postgres postgres < /usr/edb/as<x>/share/contrib/sql-profiler.sql
    ```

    where &lt;x> is the version of the Advanced Server.

    After configuring SQL Profiler, it is ready to use with all databases that reside on the server.

    ![Creating a new trace](../images/sp_create_new_trace.png)

    To access SQL Profiler functionality, highlight the name of the database in the PEM `Browser` tree control; navigate through `Server` option under `Tools` menu to the `SQL Profiler` pull-aside menu. Menu options allow you to manage your SQL traces:

    -   Select `Create trace`… to define a new trace.
    -   Select `Open trace`… to open an existing trace.
    -   Select `Delete trace(s)`… to delete one or more traces.
    -   Select `View scheduled trace(s)`… to review a list of scheduled traces.
