---
title: "Managing Postgres servers"
legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-enterprise-manager/user-guides/administrators-guide/8.0/managing_pem_server.html"
# This file is moved from pem_admin/06_managing_pem_server
redirects:
  - /pem/latest/pem_inst_guide_linux/07_reference_linux_service_script/
---

<div id="managing_pem_server" class="registered_link"></div>

## Starting and stopping monitored database servers

PEM allows you to startup and shutdown managed server instances with the PEM client. To configure a server to allow PEM to manage the service, complete the Server registration dialog, registering the database server with a PEM agent(Local agent installed on the same host as database server) and:

-   specify the `Store on PEM Server` option on the `Properties` dialog.

-   specify the name of a service script in the `Service ID` field on the `Advanced` tab:

    -   For Advanced Server, the service name is `edb-as-<x>` or `ppas-<x>`.
    -   For PostgreSQL, the service name is `postgresql-<x>`.

    Where `x` indicates the server version number.

After connecting to the server, you can start or stop the server by highlighting the server name in the tree control, and selecting `Queue Server Startup` or `Queue Server Shutdown` from the `Tools` menu.

![The Tools menu of a managed server](/images/pem_server_tools_menu_queue_server.png)


## Modifying the pg_hba.conf file

Entries in the `pg_hba.conf` file control network authentication and authorization. The `pg_hba.conf` file on the PEM server host must allow connections between the PEM server and PEM-HTTPD, the PEM agent, and the monitored servers.

During the PEM server installation process, you are prompted for the IP address and connection information for hosts that will be monitored by PEM; this information is added to the top of the `pg_hba.conf` file of the PEM backing database.

![PEM entries in the pg_hba.conf file](/images/pem_pg_hba.png)

You may also need to manually modify the `pg_hba.conf` file to allow connections between the PEM server and other components. For example, if your PEM-HTTPD installation does not reside on the same host as the PEM server, you must modify the `pg_hba.conf` file on the PEM server host to allow PEM-HTTPD to connect to the server.

By default, the `pg_hba.conf` file resides in the data directory, under your Postgres installation; for example, on an Advanced Server 10 host, the default location of the pg_hba.conf is:

`/var/lib/edb/as10/data/pg_hba.conf`

You can modify the `pg_hba.conf` file with your editor of choice. After modifying the file, restart the server for changes to take effect.

The following example shows a `pg_hba.conf` entry that allows an md5 password authenticated connection from a user named `postgres`, to the `postgres` database on the host on which the pg_hba.conf file resides. The connection is coming from an IP address of `192.168.10.102`:

```text
# TYPE     DATABASE        USER        CIDR-ADDRESS         METHOD
# IPv4 local connections:
 host     postgres       postgres    192.168.10.102/32       md5
```

You may specify the address of a network host, or a network address range. For example, if you wish to allow connections from servers with the addresses `192.168.10.23`, `192.168.10.76` and `192.168.10.184`, enter a CIDR-ADDRESS of `192.168.10.0/24` to allow connections from all of the hosts in that network:

```text
# TYPE     DATABASE        USER        CIDR-ADDRESS       METHOD
# IPv4 local connections:
  host      postgres         all       192.168.10.0/24       md5
```

For more information about formatting a `pg_hba.conf` file entry, please see the [PostgreSQL core documentation](http://www.postgresql.org/docs/current/auth-pg-hba-conf.html).

Before you can connect to a Postgres server with PEM, you must ensure that the `pg_hba.conf` file on both servers allows the connection.

If you receive this error when connecting to the database server, modify the `pg_hba.conf` file, adding an entry that allows the connection.

## Creating and maintaining databases and objects

Each instance of a Postgres server manages one or more databases; each user must provide authentication information to connect to the database before accessing the information contained within it. The PEM client provides dialogs that allow you to create and manage databases, and all of the various objects that comprise a database (e.g. tables, indexes, stored procedures, etc.).

Creating a database is easy in PEM: simply right click on any managed server’s `Databases` node and select `Database…` from the `Create` menu. After defining a database, you can create objects within the new database.

For example, to create a new table, right click on a `Tables` node, and select `Table…` from the `Create` menu. When the `New Table` dialog opens, specify the attributes of the new table.

![Create Table - General Tab](/images/table_general.png)

PEM provides similar dialogs for the creation and management of other database objects:

-   tables
-   indexes
-   stored procedures
-   functions
-   triggers
-   views
-   constraints, etc.

Each object type is displayed in the tree control; right click on the node that corresponds to an object type to access the `Create` menu and create a new object, or select `Properties` from the context menu of a named node to perform administrative tasks for the highlighted object.

## Template Linux service script

-   A service script for the database server allows the PEM server to start, stop or restart the database server if necessary when performing configuration management, certificate management, or other administrative tasks.

-   The Postgres server on which the PEM server resides must contain a service script. Postgres installers in Windows generated by EDB create a service script for you; if you are using a Postgres server from another source like native packages, you must provide a service script.

    On **CentOS or RHEL 7.x | Rocky Linux or RHEL 8.x**, the service script resides in the `/usr/lib/systemd/system` directory.

-   Service scripts are platform-specific.

-   For information about customizing a Postgres service, visit:

    <https://www.postgresql.org/docs/current/static/server-start.html>