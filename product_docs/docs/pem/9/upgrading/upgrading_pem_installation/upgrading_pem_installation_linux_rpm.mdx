---
title: "Upgrading a PEM native package installation on a Linux host"
legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-enterprise-manager/installation-getting-started/upgrade-migration-guide/8.0/upgrading_pem_installation_linux_rpm.html"
redirects:
- /pem/latest/pem_upgrade/01_upgrading_pem_installation/02_upgrading_pem_installation_linux_rpm/
- /pem/latest/pem_upgrade/upgrading_pem_installation/upgrading_pem_installation_linux_rpm/
---

To upgrade PEM component software on Linux hosts, install a newer version of the PEM component native packages in the following order:

1.  Invoke the PEM agent native package installer on each monitored node except the PEM server host.
2.  Invoke the PEM server native package installer. it upgrades both the PEM server and the PEM agent that resides on the PEM server host.

During an installation, the component installation automatically detects an existing installation and performs an upgrade. After upgrading the PEM agent and server, you can upgrade SQL Profiler if required. That step is platform specific.

!!! Note
    If you already configured or are planning to configure any shell/batch script run by a Linux agent that's upgraded from any earlier version to version 7.11 or later, you must speciy the user for the `batch_script_user` parameter in the `agent.cfg` file. We strongly recommended that you use a non-root user to run the scripts. Using the root user can result in compromising the data security and operating system security. However, if you want to restore the pemagent to its original settings using a root user to run the scripts, then you must set the `batch_script_user` parameter to `root`.

## Prerequisites to upgrade a PEM installation on Linux host

PEM depends on third-party components from the vendor repository, including python3, libboost, openssl, snmp++, and libcurl. To ensure these components are up to date, update your operating system using platform-specific commands. 

The minimum version required for openssl is 1.0.2k. If you're using a version of PostgreSQL or EDB Postgres Advanced Server earlier than version 10, before the upgrade you must install the `libs` package for version 10 or above on the system where the PEM server is installed. Use the following platform-specific commands to install the `libs` version 10 or above on your host.

### Prerequisites to upgrade a PEM installation on a CentOS or RHEL host

To upgrade packages on a CentOS or RHEL 7.x host:

```shell
yum update
yum upgrade
```

To upgrade packages on a Rocky Linux or AlmaLinux or RHEL 8.x host:

```shell
dnf update
dnf upgrade
```

To upgrade EDB Postgres Advanced Server libs:

```shell
yum install edb-as<X>-server-libs
```

To upgrade PostgreSQL libs:

```shell
yum install postgresql<X>-libs
```

Where `<X>` is the PostgreSQL or EDB Postgres Advanced Server version whose `libs` package you want to install.

### Prerequisites to upgrade a PEM installation on a Debian or Ubuntu host

To upgrade packages on a Debian or Ubuntu host:

```shell
apt-get update
apt-get upgrade
```

To upgrade Advanced Server libs:

```shell
apt-get install edb-as<X>-server-libs
```

To upgrade PostgreSQL libs:

```shell
apt-get install postgresql<X>-libs
```

Where `<X>` is the PostgreSQL or EDB Postgres Advanced Server version whose `libs` package you want to install.

### Prerequisites to upgrade a PEM installation on a SLES host

To upgrade packages on a SLES host:

```shell
zypper update
zypper upgrade
```

To upgrade EDB Postgres Advanced Server libs:

```shell
zypper install edb-as<x>-server-libs
```

To upgrade PostgreSQL libs:

```shell
zypper install postgresql<x>-libs
```

Where `<X>` is the PostgreSQL or EDB Postgres Advanced Server version whose `libs` package you want to install.

## Upgrading a PEM agent native package installation

You can use native packages to upgrade existing PEM agents initially installed using native packages. The upgrade process doesn't update the PEM agent configuration file. After installing the new agent, you must manually copy the configuration file of the existing agent to the new installation location.

### Upgrading the PEM agent on a CentOS or RHEL host

For CentOS or RHEL 7.x or RHEL 8.x, to upgrade a PEM agent, use the following command:

```shell
yum upgrade edb-pem-agent
```

For Rocky Linux or AlmaLinux or RHEL 8.x, you can also use the following command:

```shell
dnf upgrade edb-pem-agent
```

### Upgrading a PEM agent on a Debian or Ubuntu host

To upgrade a PEM agent, use the following command:

```shell
apt-get upgrade edb-pem-agent
```

### Upgrading a PEM agent on a SLES host

To upgrade a PEM agent, use the following command:

```shell
zypper update edb-pem-agent
```

## Upgrading a PEM server native package installation

If you initially used native packages to install your PEM server, you can use native packages to upgrade your PEM server. The commands to upgrade are platform specific. 

If you want to upgrade a PEM server that is installed on a machine in an isolated network, you need to create a PEM repository on that machine before you upgrade the PEM server. For more information about creating a PEM repository on an isolated network, see [Creating a PEM Repository on an Isolated Network](/pem/latest/installing/creating_pem_repository_in_isolated_network/).

### Upgrading a PEM server on a CentOS, Rocky Linux, AlmaLinux, or RHEL host

To use an RPM package to upgrade an existing RPM installation, you can use the `yum` package manager to upgrade the installed version of the PEM server on CentOS/RHEL 7.x or Rocky Linux/AlmaLinux/RHEL 8.x:

```shell
yum upgrade edb-pem
```

You can also use the `dnf` command on Rocky Linux/AlmaLinux/RHEL 8.x:

```shell
dnf upgrade edb-pem
```

!!! Note
    If you're doing a fresh installation of the PEM server on CentOS or RHEL 7.x host, the installer installs the `edb-python3-mod_wsgi` package along with the installation. The package is a requirement of the operating system. If you are upgrading the PEM server on CentOS or RHEL 7.x host, the`the edb-python3-mod_wsgi` packages replaces the `mod_wsgi package`  package to meet the requirements of the operating system.

After upgrading the PEM server using yum or the `dnf` command, you must configure the PEM server. For detailed information, see [Configuring the PEM server](#configuring-the-pem-server).

### Upgrading the PEM server on a Debian or Ubuntu host

You can use the `apt-get` package manager to upgrade the installed version of the PEM server on supported versions of Debian or Ubuntu:

```shell
apt-get upgrade edb-pem
```

After upgrading the PEM server with `apt-get`, you need to configure the PEM server. For detailed information, see [Configuring the PEM server](#configuring-the-pem-server).

### Upgrading the PEM server on a SLES host

You can use the zypper package manager to upgrade the installed version of the PEM Server on supported versions of a SLES host:

```shell
zypper update edb-pem
```

After upgrading the PEM server using zypper, you need to configure the PEM server. For detailed information, see [Configuring the PEM server](#configuring-the-pem-server).


## Configuring the PEM server

After upgrading the PEM server, you can use the following command to configure the PEM server:

```shell
/usr/edb/pem/bin/configure-pem-server.sh
```

The configure script uses the values from the old PEM server configuration file while running the script.

After executing the PEM server configuration file, use your version-specific service control command to restart the httpd service.

For detailed information, see [Configuring the PEM server on Linux platforms](/pem/latest/installing/configuring_the_pem_server_on_linux/).

!!! Note
    From PEM version 7.11 and later, the configure script requires a superuser password only after the upgrade process.
