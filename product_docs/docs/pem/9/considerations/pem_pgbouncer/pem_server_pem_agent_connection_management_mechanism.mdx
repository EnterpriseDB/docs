---
title: "PEM server and agent connection management mechanism"
legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-enterprise-manager/installation-getting-started/pgbouncer-configuration-guide/8.0/the_pem_server_pem_agent_connection_management_mechanism.html"
redirects:
  - /pem/latest/pem_pgbouncer/01_the_pem_server_pem_agent_connection_management_mechanism/
  - /pem/latest/pem_online_help/09_toc_pem_configure_pgbouncer/01_pem_pgbouncer_server_agent_connection/
---

Each PEM agent connects to the PEM database server using the SSL certificates for each user. For example, an agent with `ID#1` connects to the PEM database server using the agent1 user.

![Connecting to the PEM database without pgBouncer](../../images/pem_database_without_pgbouncer.png)

Prior to PEM version 7.5, the following limitations disallowed the use of the connection pooler between the PEM server and PEM agent:

-   The PEM agent uses an SSL certificate to connect to the PEM database server.
-   It uses an individual user identifier when connecting to the PEM database server.

EDB modified the PEM agent to allow the agent to use a common database user (instead of the dedicated agent users) to connect to the PEM database server.

![Connecting to pgBouncer.](../../images/pem_database_with_pgbouncer.png)

We recommend using PgBouncer version 1.9.0 or later as the connection pooler. Versions 1.9.0 or later support cert authentication. PEM agents can connect to pgBouncer using SSL certificates.
