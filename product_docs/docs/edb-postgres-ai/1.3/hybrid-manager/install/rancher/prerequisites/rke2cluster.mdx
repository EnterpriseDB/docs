---
title: Creating a Rancher RKE2 cluster for use with Hybrid Manager
navTitle: Create RKE2 cluster
description: Learn how to create a Rancher RKE2 cluster for installing PG AI Hybrid Manager.
deepToC: true
---

## Compute requirements

### Control plane

- **3 machines minimum**
- **Specifications**: 16vCPU / 32GiB memory each
- **Availability**: Distributed across three availability zones
- **Storage**: At least 100GB local disk per machinery

### Postgres node fleet

- **3 machines minimum**
- **Specifications**: 16vCPU / 32GiB memory each
- **Scaling**: Adjust quantity/size based on workload requirements

## Network requirements

### CNI and IP addressing

- **CNI**: Working Container Network Interface (using Calico)
- **IP Space**: /16 IPv4 address space for each downstream Kubernetes cluster

### DNS requirements

- **DNS zone**: Must be available
- **DNS record**: Must point to the ingress endpoint (load balancer IP or NodePort IP) of the Hybrid Manager (HM) application

### Certificate node_management

- **Preferred**: [Custom certificates]()
- **Fallback**: Self-signed certificates (auto-generated)

## Load Balancer controller

### Requirements

- **Load balancer controller** required if using `LoadBalancer` type services
- **Alternative**: Configure installation and services as 'NodePort'

### NodePort configuration

Configure the installation values.yaml if no Load Balancer controller is available.

```yaml
beaconAgent:
  provisioning:
    loadBalancerEnabled: false
    nodePortDomain: "<your nodeportdomain url here>"
```

!!! Note
    The `nodePortDomain` value is used as the URL for all Postgres clusters/instances.
    It should be a DNS name pointing to the IP addresses of the nodes where Postgres clusters/instances are running.
!!!

