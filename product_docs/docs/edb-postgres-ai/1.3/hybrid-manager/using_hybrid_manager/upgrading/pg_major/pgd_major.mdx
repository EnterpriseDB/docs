---
title: Postgres major version upgrades on Hybrid Manager for advanced high availability or distributed high availability
navTitle: AHA and DHA Postgres major version upgrades
description: Learn how to perform a Postgres major version upgrade on an advanced high-availability or distributed high-availability cluster.
---

## Upgrade considerations

- **Upgrade skips:** Direct major version skips aren't supported.
All upgrades must proceed sequentially, one major version at a time.

  Correct: 16 > 17 > 18
  
  Incorrect: 16 > 18

- **Image tag consistency:** Maintain consistency in image tags. For example, upgrade from `<old-image-version>-<distribution>_full` to `<new-image-version>-<distribution>_full`.
Failure to do so may result in an altered set of packaged extensions.

- **Physical join:** While advanced high-availability (AHA) and distributed high-availability (DHA) clusters use logical replication for day-to-day data synchronization, the process of a major version upgrade involves a *physical join* (physical replication) to facilitate the version change between data groups.
This allows data groups to be upgraded in place, where they temporarily run different major versions. 
However, you can't add a new data group with a different major version.

## Prerequisites

* Have a cluster created with Hybrid Manager (HM) up and in a healthy state. To ensure the cluster is in a healthy state, from the cluster's main page, select the **Monitoring** tab.
Check the cluster and database metrics. Make sure everything is operating and all metrics are within the defined acceptable parameters.

* We strongly recommend that you perform a full backup of your cluster and validate a comprehensive recovery plan before proceeding. 

## Upgrade the Postgres major version of an existing cluster created with HM

For major upgrades of AHA or DHA clusters (those with multiple data groups), you must upgrade all data and witness groups sequentially. While the order of groups isn't critical, ensure each group's upgrade completes entirely before starting the next.

1.  From the cluster's main page, next to the first data group you want to upgrade, from the ellipsis menu, select **Upgrade Data Group**. Then select choose **Major Upgrade**.

1.  Select your preferred new major version image.

1.  Review the upgrade path. Select **Continue**.

1.  Review the specific package changes expected with the upgrade. If everything looks correct, select **Upgrade Cluster**.

1.  After the upgrade is applied, you can use the [PGD CLI](/pgd/latest/essential-how-to/pgd-cli/#check-the-health-of-the-cluster) to ensure the data group becomes healthy. The upgrade is successful when all checks have the Status `Ok`. 

1.  After the first data group is successfully upgraded and healthy, upgrade the remaining data and witness groups one by one until the entire cluster is on the new version.

!!! Note
    On rare occasions, additional steps might be recommended after the major upgrade is completed for certain product releases. 
    Consult the release notes to see if this is necessary in your case.

