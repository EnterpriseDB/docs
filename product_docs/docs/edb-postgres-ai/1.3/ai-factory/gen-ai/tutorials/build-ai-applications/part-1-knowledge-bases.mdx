---
title: Part 1 — Forge the Knowledge (Knowledge Bases)
navTitle: Part 1 — Knowledge
description: Create and validate Knowledge Bases with hybrid search (semantic + metadata filters) to ground your agent on trustworthy data.
---

This quickstart creates the data foundation your agent relies on. You’ll build two Knowledge Bases (KBs) — for example, a Product Catalog and a Manufacturer feed — and enable hybrid search so the agent retrieves accurate, relevant context.

Audience: Developers, Data Engineers

Estimated time: 20–40 minutes (depending on data size)

## Goals

- Model embedding vs. metadata fields to support hybrid search
- Create two KBs and run validation queries
- Capture retriever settings (top‑K, thresholds, filters) you’ll reuse in later parts

## Prerequisites

- Data sources available (tables, files, or connectors via Data Lake)
- An embedding model endpoint (KServe) or an approved provider
- Basic familiarity with Vector Engine and Pipelines

Sources (for background and reference):
- KB concepts: /edb-postgres-ai/1.3/ai-factory/gen-ai/libraries/knowledge-bases-explained.mdx
- KB how‑to patterns: /edb-postgres-ai/1.3/ai-factory/gen-ai/libraries/knowledge-bases.mdx
- Vector Engine: /edb-postgres-ai/1.3/ai-factory/vector-engine
- Model Serving (KServe): /edb-postgres-ai/1.3/ai-factory/model/serving/
- Access endpoints (internal/external): /edb-postgres-ai/1.3/ai-factory/model/access-kserve-endpoints

## Step 1 — Model your fields for hybrid search

Decide which fields will be embedded (semantic search) and which remain as metadata (filters):

- Embedding candidates: `description`, `long_text`, `specifications`
- Metadata candidates: `manufacturer_id`, `category`, `base_price`, `sku`, `region`

Tips
- Normalize and de‑duplicate text before embedding (consistent casing, remove boilerplate). 
- Keep metadata small and selective; expose the minimum you need for filters.

## Step 2 — Create the Product Catalog KB

Create a KB from your source (for example, a products table or a curated CSV in the Data Lake):

1) Map fields: assign embedding vs. metadata fields explicitly.
2) Select the embedding model endpoint (KServe or approved provider).
3) Ingest and embed content.
4) Run a few validation queries (semantic only) to confirm relevance.

Operational considerations
- Large datasets: batch ingestion and monitor throughput. 
- Re‑index cadence: determine when you’ll re‑embed (see Pipelines if automating updates: /edb-postgres-ai/1.3/ai-factory/pipeline).

## Step 3 — Create the Manufacturer KB

Repeat the process for manufacturer content (CSV/API feed or table):

1) Map fields and ingest.
2) Use the same embedding model for consistency.
3) Validate independently (queries targeting manufacturer names, product lines, warranty terms, etc.).

Tip: Keep KBs focused. You’ll combine them at retrieval time rather than mixing unrelated content.

## Step 4 — Enable hybrid search on the retriever

Configure a retriever that combines semantic similarity with metadata filters.

Recommended starting values
- `top_k`: 5–10
- Similarity threshold: tuned so you filter obvious noise without losing recall
- Filters: start simple (for example, `manufacturer_id = <X>` or `price BETWEEN <A> AND <B>`) and expand

Validate queries
- Without filters: confirm semantic matches make sense.
- With filters: confirm results reflect both meaning and constraints (for example, a specific manufacturer and price band).

Performance and quality tips
- Increase `top_k` if recall is low; decrease if latency is high.
- Adjust thresholds if you see noise (too low) or missing relevant results (too high).
- Use Vector Engine queries to spot‑check the embedding store alongside metadata.

## Step 5 — Capture configuration for reuse

Write down the retriever configuration you’ll reuse in the agent (Part 3):

- KBs involved: Product Catalog KB, Manufacturer KB
- Embedding model used
- `top_k`, similarity thresholds, and filter sets

## Troubleshooting

- Poor relevance: clean/normalize text; adjust chunking and model choice; tune `top_k` and threshold.
- Filter mismatch: check metadata types/values; verify filters are applied after semantic scoring.
- Latency: reduce `top_k`; improve model serving resources; consider pre‑filtering by metadata before similarity.

## Next steps

- Proceed to Part 2 — Assemble the Toolbox: /edb-postgres-ai/1.3/ai-factory/learn/quickstarts/build-ai-applications/part-2-tools

Related how‑to
- Create a Knowledge Base with hybrid search: /edb-postgres-ai/1.3/ai-factory/gen-ai/how-to/kb-hybrid-search
