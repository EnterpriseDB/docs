---
title: Configuring backups to support disaster recovery
navTitle: Configuring backups
description: Learn about backup requirements and understand what RTO and RPO times to expect when restoring your HM instance and Postgres clusters.
---

A successful Disaster Recovery (DR) outcome is directly tied to a robust backup strategy. While HM provides a default backup configuration, you should evaluate and implement supplemental schedules to ensure the environment aligns with your specific RPO and RTO requirements.

HM backups are handled with [Velero](https://velero.io/).

## RTO and RPO

The ability to do any restore, the associated recovery time objective (RTO), and recovery point objective (RPO) depend on the frequency and size of the backups.

- The **RTO** will be determined by the time it takes to deploy a new HM instance and restore the HM control plane and data plane (Postgres clusters) from the available backups. The RTO will be affected by the size of the Postgres clusters, the number of Postgres clusters, and the size of the HM control plane data.

- The **RPO** will be determined by the frequency of the backups and the backup lifecycle policies. Critical data, such as the definition of the Postgres clusters, is stored as Kubernetes objects and included in the Velero backup. By default, this backup happens daily at 23:00, as defined by the default schedule `velero-backup-kube-state`. If your RPO requires more frequent backups, complement the default schedule by creating an additional custom backup schedules.

While RTO and RPO targets are defined by your organization's service level requirements, the actual time and data recovery points achieved during a disaster will vary based on data volume and the manual nature of this procedure. We strongly recommend performing periodic disaster recovery exercises to validate that these manual steps can consistently meet your defined RTO and RPO objectives.

## Backup readiness

During installation, you configure an [S3-compatible storage](/edb-postgres-ai/preview/hybrid-manager/install/sys_reqs/#7-object-storage) for your HM instance that stores:

-   Internal backups (HM control plane data)
-   Postgres backups (Postgres database backups or data plane data)

You can also define custom storage locations in the same bucket to be used by your HM instance.

All of this data needs to be available after a disaster. Depending on the criticality of the data and the level of disaster that you want to be able to recover from, youâ€™ll need to replicate this data outside of the CSP region or physical data center where the HM instance resides.

!!! tip
    When using a bucket, you can achieve replication by using cross-regions replication. For example, for AWS S3 buckets, see [cross-region replication](https://docs.aws.amazon.com/AmazonS3/latest/userguide/replication.html#crr-scenario).

Postgres databases use continuous backup by default, so you can restore them at any point in time. They are limited only by backup lifecycle policies.

Critical appliance data, such as the definition of the Postgres clusters, is stored as Kubernetes objects and included in the Velero backup. By default, this backup happens daily at 23:00, as defined by the default schedule `velero-backup-kube-state`.

If your RPO requires more frequent backups, complement the default schedule by creating an additional custom backup schedules.

!!! Danger
    Do not modify the default schedule, as it may be overwritten by a HM software update.

The following example shows a custom schedule to back up the needed resources every 6 hours at the top of the hour:

```shell
velero create schedule <backup-name> --schedule="0 */6 * * *" --include-namespaces='*' --include-resources='*' --snapshot-volumes=false --ttl=168h --skip-immediately=false
```

To check how the backup schedule was configured in the backend, run the following command:

```shell
velero get schedules <backup-name> -o yaml | yq .spec
```

Which should return the following output:

```yaml
schedule: 0 */6 * * *
skipImmediately: false
template:
  csiSnapshotTimeout: 0s
  hooks: {}
  includedNamespaces:
    - '*'
  includedResources:
    - '*'
  itemOperationTimeout: 0s
  metadata: {}
  snapshotVolumes: false
  ttl: 168h0m0s
useOwnerReferencesInBackup: false
```

## Next topic

[Perform a disaster recovery of your HM instance and Postgres clusters using Velero](hadr_recovery).
