---
title: Disaster recovery overview
navTitle: Overview
description: Learn about disaster recovery in HM.
---

Disaster can affect Hybrid Manager (HM) and make it unusable. For example, unavailability of the underlying Cloud Service Provider (CSP) region or an outage in a data center that makes hardware unusable can occur. 

A disaster recovery (DR) option allows you to restore your databases to a point-in-time from your available backups. It involves recovering the **Control plane** (the HM console and HM components) and **Data plane** (your HM-managed Postgres clusters) after a catastrophic failure.

Unlike High Availability (HA), which provides real-time failover, DR is a manual restoration process initiated when the original HM environment is unrecoverable.

## Recovery scenarios

-   **Restore HM to original location**: You have two data centers (DC1, DC2), and HM runs in DC1. You need to restore HM from object storage to DC1.

-   **Restore HM to alternative location**: You have two data centers (DC1, DC2), and HM runs in DC1. You need to restore HM from object storage to DC2 (because DC1 is down for an unexpected period of time).

## Core components

DR relies on three components:

1.  **Velero:** An open-source tool that backs up Kubernetes resources (Definitions, Secrets, and ConfigMaps). It captures the configuration and state of your HM installation.
1.  **Object storage:** An S3-compatible bucket (AWS S3, GCS, etc.) that holds the Velero backups and the Postgres WAL/Base backups.
1.  **HM console:** Use it to re-provision database instances and bring back their data.

## Scope: the two-layer restore strategy

To understand DR, you must distinguish between the two layers of data being recovered:

| Layer             | Content                                                                           |
|-------------------|-----------------------------------------------------------------------------------|
| **Control plane** | HM console and its applications, general settings, user accounts, etc.            |
| **Data plane**    | Actual Postgres tables, rows, and indexes from database clusters created with HM. |

The backups for both data layers are stored in an S3-compatible bucket managed with Velero. You define the location and frequency of the backups during the initial HM configuration and installation.

!!!note 
DR procedures donâ€™t restore active migration functionality. While the transporter-db and migration-db databases are recovered, thus preserving migration history for audit and record-keeping, migrations that were active and impacted by the disaster will need to be re-created.
!!!

For HM environments with [multi-DC enabled](/edb-postgres-ai/preview/hybrid-manager/using_hybrid_manager/multi-dc/), you can restore the custom managed storage locations as you defined them in the associated S3-compatible storage area.

## Workflow: from outage to recovery

When a disaster occurs, the recovery follows this sequence:

1.  **Infrastructure preparation:** Deploy a fresh Kubernetes cluster in a healthy region or data center.
1.  **Environment restore:** Use **Velero** to pull the HM configuration and Postgres database data from your bucket. This brings back the HM console and the records of your previous databases.
1.  **Database re-provisioning:** Log into the restored HM console. Databases will appear as "Deleted" or "Missing."
1.  **Final reconnect:** Use the "Restore" function in the HM console to spin up new Postgres database clusters that point to the original data in object storage.

## Critical requirements for DR success

For this architecture to work, the following must be true **before** a disaster:

*   **Offsite backups:** Your S3-compatible bucket must be replicated to a different region or physical site. If the bucket dies with the data center, DR is impossible.
*   **Snapshot exclusions:** By default, DR for HM focuses on metadata (`--snapshot-volumes=false`). We rely on the Postgres-native backup stream (Barman) for the heavy lifting of database data.
*   **Consistent credentials:** The new HM instance must have the same IAM permissions or secret access to the original object storage bucket to "see" the old backups.

!!!note
**Recovery vs. Resilience** Remember that DR doesn't provide "zero downtime." Your RTO (how long you are offline) is largely determined by the time it takes to provision new infrastructure and the speed of your network when pulling database logs.
!!!

## Next topic

[Configure backups to support your RTO and RPO times](/backup_considerations/).
