---
title: "Schema migration"


legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-migration-portal/user-guides/user-guide/3.0.1/mp_schema_migration.html"
---

<div id="mp_schema_migration" class="registered_link"></div>


After resolving errors in your schemas, you can migrate the schemas to an EDB Postgres Advanced Server cluster (i.e., instance).

The Migration Portal provides guided steps for migrating your schemas to one of the following target database options:

-   Existing on-premises EDB Postgres Advanced Server
-   New on-premises EDB Postgres Advanced Server
-   EDB Postgres Advanced Server in the cloud

The first two options above lead to the creation of Data Definition Language (DDL) SQL files which can be used to perform an offline and manual loading of the schemas into the target database using a client application such as the psql client, pgAdmin, or Toad Edge. The third option above provides the ability to perform an online migration of the schemas to the target database by directly connecting to the target database.

<div id="existing_on_premises_edb_advanced_server" class="registered_link"></div>

## Migrating to an existing on-premises EDB Postgres Advanced Server host

You can migrate schemas to an existing on-premises EDB Postgres Advanced Server on Windows or Linux platforms.

1.  Select **Existing on-premises EDB Postgres Postgres Advanced Server**.


1.  Select one or more schemas to migrate to EDB Postgres Advanced Server. You can also expand a schema and select specific object types under each schema.
 
 ![Schema and objects are selected](../images/schema_object_selection.png)

    !!! Note
    If your schemas aren't 100% compatible, a banner appears. Complete the Contact Us form as needed.


1.  To download the assessed schemas, select **Download SQL file**.

1. Extract the downloaded zip file. The zip package consists of SQL files with DDLs for your selected schemas and objects. The DDLs are grouped in SQL files by project, schemas, or objects.

 | SQL file naming convention                              | Description                                                                              | Example                                                                         |
 |------------------------------------------------|------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
 | *&lt;ProjectName>* _ALL_OBJECTS.sql            | A single consolidated file consisting of DDLs for all your selected schemas and objects. | **AllTestMigration_ALL_OBJECTS.sql** will consist of DDLs for all objects of schemas OE, SH, IX, and PM, and only selected objects of schema HR.                                                                            |
 | *&lt;SchemaName>* .sql                         | One or more files, each consisting of DDLs for selected objects in a particular schema.  | **HR.sql**  will consist of DDLs for all the selected objects of the HR schema. |
 | *&lt;SchemaName>* &#95; *&lt;ObjectType>* .sql | One or more files, each consisting of DDLs for a single selected object.                 | **HR_TABLE.sql**  will consist of DDLs only for TABLE object of the HR schema. |

1.  Select **Windows** or **Linux**.


1.  To import the schemas:

 **On Windows:**

    -   On CLI run:

        ```text
        \i c:\users\...\<project_name>.sql
        ```

    -   On cmd/shell run:

        ```text
        edb-psql -f <project_name>.sql
        ```

 **On Linux**

    -   Invoke the following `edb-psql` client commands:

    ```text
    sudo su - enterprisedb
    edb-psql edb
    create database <database_name>;
    \connect <database_name>
    \i <project_name>.sql
    ```

!!! Note
    You can alternatively use the `pgAdmin` client for the import.

The converted schemas migrate to the target server.


<div id="new_on_premises_edb_advanced_server" class="registered_link"></div>

## Migrating to a new on-premises EDB Postgres Advanced Server installation

You can install new EDB Postgres Advanced Server on premises on Windows or Linux platforms and migrate the schemas.

1.  Select **New on-premises EDB Postgres Postgres Advanced Server**.


1.  Select one or more schemas to migrate to EDB Postgres Advanced Server. You can also expand a schema and select specific object types under each schema.
 
 ![Schema and objects are selected](../images/schema_object_selection.png)

1.  For the operating system, select **Windows** or **Linux**.

    - *On Windows*:   
 
     Select **Download Windows installer**. For information on the installation procedure, select **EDB Postgres Advanced Server Installation Guide for Windows**.

    - *On Linux*:
 
     Select either **Repository** or **More options** to install the EDB Postgres Advanced Server. For information on the installation procedure, select **EDB Postgres Advanced Server Installation Guide** for Linux.


1.  To download the assessed schemas, select **Download SQL file**.

1. Extract the downloaded zip file. The zip package consists of SQL files with DDLs for your selected schemas and objects. The DDLs are grouped in SQL files by project, schemas, or objects.

 | SQL file naming convention                              | Description                                                                              | Example                                                                         |
 |------------------------------------------------|------------------------------------------------------------------------------------------|---------------------------------------------------------------------------------|
 | *&lt;ProjectName>* _ALL_OBJECTS.sql            | A single consolidated file consisting of DDLs for all your selected schemas and objects. | **AllTestMigration_ALL_OBJECTS.sql** will consist of DDLs for all objects of schemas OE, SH, IX, and PM, and only selected objects of schema HR.                                                                            |
 | *&lt;SchemaName>* .sql                         | One or more files, each consisting of DDLs for selected objects in a particular schema.  | **HR.sql**  will consist of DDLs for all the selected objects of the HR schema. |
 | *&lt;SchemaName>* &#95; *&lt;ObjectType>* .sql | One or more files, each consisting of DDLs for a single selected object.                 | **HR_TABLE.sql**  will consist of DDLs only for TABLE object of the HR schema. |

1.  You can import schemas by running:

    - *On Windows CLI*:  

     ```text
     \i c:\users\...\<project_name>.sql
    ```

    - *On Windows command prompt*

     ```text
     edb-psql -f <project_name>.sql
    ```
    
    - *On Linux*:

     Connect to the EDB Postgres Advanced Server instance using psql

     ```text
     sudo su - enterprisedb
     edb-psql edb
     create database <database_name>;
     \connect <database_name>
     \i <project_name>.sql
    ```

 !!! Note
    You can alternatively use the `pgAdmin` client for the import.

The converted schemas migrate to the target server.


## Migrate to the cloud

Migrate schemas on EDB Postgres Advanced Server to the cloud.

1.  Select **EDB Postgres Advanced Server on Cloud**.

1.  Select one or more schemas to migrate to EDB Postgres Advanced Server. You can also expand a schema and select specific object types under each schema.
 
 ![Schema and objects are selected](../images/schema_object_selection.png)

1.  Select the cloud platform, for example, **BigAnimal**.


1.  To launch a new cluster, select **Go to BigAnimal**.
 
    Or, if you have an existing cluster running, select **Next**.

    !!! Note
    See the [Big Animal](https://www.enterprisedb.com/edb-cloud) page for more information.

1.  Enter the required connection details on the `Connect` page.

    ![Connecting to the cloud cluster](../images/mp_migrate_cloud_connection_updated.png)

1.  To verify the connection details, select **Test Connection**.

    !!! Note
    You can select **Edit Connection** to make changes to the connection details and retest the connection details.

1.  Once the connection is successful, select **Next**.


The converted schemas migrate to the target server.


