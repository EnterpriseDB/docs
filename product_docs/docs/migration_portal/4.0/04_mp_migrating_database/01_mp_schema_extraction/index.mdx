---
title: "Performing a schema extraction"

legacyRedirectsGenerated:
  # This list is generated by a script. If you need add entries, use the `legacyRedirects` key.
  - "/edb-docs/d/edb-postgres-migration-portal/user-guides/user-guide/3.0.1/mp_schema_extraction.html"

redirects:
  - ../01_whats_new/

---

<div id="mp_schema_extraction" class="registered_link"></div>


You can perform a schema extraction using either of the following methods. EDB recommends using the EDB DDL extractor to extract your schemas.
 -  [EDB DDL extractor](#extracting-schemas-using-the-edb-ddl-extractor) (recommended method)
 -  [Oracle’s Data Pump utility](..01_data_pump_utility/) 

## Extracting schemas using the EDB DDL Extractor

Download the latest EDB DDL Extractor script from the Migration Portal `Projects` page or from the link provided in the DDL Extractor guide in the Portal Wiki.

!!! Note
    Migration Portal might become unresponsive for very large SQL files, depending on your system’s and browser’s resource availability. To resolve this, try extracting fewer schemas at a time to reduce the SQL file size.

#### Prerequisites

 The EDB DDL Extractor script can be run in SQL Developer or SQL\*Plus. It uses Oracle’s `DBMS_METADATA` built-in package to extract DDLs for different objects under schemas (specified while running the script). The EDB DDL extractor creates the DDL file uploaded to the portal and analyzed for EDB Postgres compatibility.

 
!!! Note
    You must have `CONNECT` and `SELECT_CATALOG_ROLE` roles and `CREATE TABLE` privilege.

**For SQL\*Plus**

1.  Connect to SQL\*Plus and run the command:

    `SQL>@edb_ddl_extractor.sql`

2.  Provide the schema name and the path or directory in which the extractor will store the extracted DDL. When extracting multiple schemas, use a comma (`‘,’`) as a delimiter.

 !!! Note
     If you want to extract all the user schemas from the current database, do not mention any schema names while extracting. However, it is recommended to mention the schema names that you would like to extract.

3.  If you want to extract dependent objects from other schemas, enter `yes` or `no`.

**For example, on Linux:**

```text
Enter a comma separated list of schemas to be extracted (Default all schemas): HR, SCOTT, FINANCE

Location for output file (Default current location) : /home/oracle/extracted_ddls/

WARNING:

Given schema(s) list may contain objects which are dependent on objects from other schema(s), not mentioned in the list.` `Assessment may fail for such objects. It is suggested to extract all dependent objects together.

Extract dependent object from other schemas?(yes/no) (Default no / Ignored for all schemas option): yes
```
**On Windows:**

```text
Enter comma separated list of schemas to be extracted (Default all schemas): HR, SCOTT, FINANCE

Location for output file (Default current location) : c:\Users\Example\Desktop\

WARNING:

Given schema(s) list may contain objects which are dependent on objects from other schema(s), not mentioned in the list.` `Assessment may fail for such objects. It is suggested to extract all dependent objects together.

Extract dependent object from other schemas?(yes/no) (Default no / Ignored for all schemas option): yes
```

**For SQL Developer**

1.  Connect to the SQL server and run the following command:

![Enter the path for Linux or Windows.](/images/mp_schema_extraction_paths.png)

 *Figure 3-1: Enter the path for Linux or Windows*

2.  Enter a comma-separated list of schemas:

![Provide a list of schemas.](/images/mp_schema_extraction_list.png)

 *Figure 3-2: Provide a list of schemas*

3.  Enter the path for the output file:

![Specify the output file path.](/images/mp_schema_extraction_target.png)

 *Figure 3-3: Specify the output file path*

4.  Enter (yes/no) to extract dependant objects:

![Extracting dependent objects.](/images/mp_schema_dependent_objects.png)

 *Figure 3-4: Extracting dependent objects*

!!! Note
    You can also enter single schema name in both SQL\*Plus and SQL Developer.

The script then iterates through the object types in the source database and once the task is completed, the .SQL output is stored at the entered location, i.e., `c:\Users\Example\Desktop\`. 

Migration Portal recommends you to upload the .SQL output file in the UTF-8 encoding format. If a .SQL file with a non UTF-8 encoding is uploaded, all the characters that are not compatible with UTF-8 are converted to the replacement character ‘�’ in the ouput DDL.

!!! Tip
    You can manually convert the extracted file to the UTF-8 format by using the *iconv* utility on Linux or the *LibIconv* utility on Windows. For example, if the `NLS_LANG` value in your environment is Latin-1 (ISO-8859-1), you can convert the extracted file to the UTF-8 format, as follows:
 
    `iconv -f iso-8859-1 -t UTF-8 sample.sql > sample_utf8.sql`

**Additional Notes**

-   The EDB DDL Extractor script does not extract objects restored using `Flashback` and still have names like `BIN$b54+4XlEYwPgUAB/AQBWwA==$0`. If you want to extract these objects, you must change the name of the objects and re-run the extraction process.
-   DDL Extractor extracts `nologging` tables as normal tables. Once these tables are migrated to EDB Postgres Advanced Server, WAL log files will be created.
-   DDL Extractor creates Global Temporary tables to store the schema names and their dependency information. These tables are dropped at the end of successful extraction.
-   DDL Extractor script does not extract schemas whose name starts with `PG_` because PostgreSQL does not support it. If you want to extract these schemas, you must change name of schema before extraction.



## Schemas and objects support

See the following sections for supported and unsupported schemas and objects.

### Unsupported schemas

See the following table for a list of Oracle systems schemas you must exclude while generating the SQL dump file.

|                       |                     |                   |                    |                         |
| :-------------------- | :------------------ | :---------------- | :----------------- | :---------------------- |
| ANONYMOUS	| APEX_PUBLIC_USER	| APEX_030200	| APEX_040000	| APEX_040200	 |
| APPQOSSYS	| AUDSYS	| CTXSYS	| DMSYS	| DBSNMP	 |
| DBSFWUSER	| DEMO	| DIP	| DMSYS	| DVF	 |
| DVSYS	| EXFSYS	| FLOWS_FILES	| FLOWS_020100	| FRANCK	 |
| GGSYS	| GSMADMIN_INTERNAL	| GSMCATUSER	| GSMROOTUSER	| GSMUSER	 |
| LBACSYS	| MDDATA	| MDSYS	| MGMT_VIEW	| OJVMSYS	 |
| OLAPSYS	| ORDPLUGINS	| ORDSYS	| ORDDATA	| OUTLN	 |
| ORACLE_OCM	| OWBSYS	| OWBYSS_AUDIT	| PDBADMIN	| RMAN	 |
| REMOTE_SCHEDULER_AGENT	| SI_INFORMTN_SCHEMA	| SPATIAL_CSW_ADMIN_USR	| SPATIAL_WFS_ADMIN_USR	| SQLTXADMIN	 |
| SQLTXPLAIN	| SYS$UMF	| SYS	| SYSBACKUP	| SYSDG	 |
| SYSKM	| SYSRAC	| SYSTEM	| SYSMAN	| TSMSYS	 |
| WKPROXY	| WKSYS	| WK_TEST	| WMSYS	| XDB	 |
| XS$NULL	| 				 |	

!!! Note
    EDB Postgres Advanced Server does not support schema names starting with **pg_**.

### Supported object types

-   Synonyms
-   DB Links
-   Types and type body
-   Sequences
-   Tables
-   Constraints
-   Indexes (Except LOB indexes and indexes on materialized views)
-   Views
-   Materialized views
-   Triggers
-   Functions
-   Procedures
-   Packages

!!! Note
    COMMENTS on columns, tables, and materialized views are also supported.

### Unsupported object types

-   Editions
-   Operators
-   Schedulers
-   LOB indexes and indexes on materialized views
-   XML schemas
-   Profiles
-   Role and object grants
-   Tablespaces
-   Directories
-   Users
-   RLS policy
-   Queues
