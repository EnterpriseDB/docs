---
title: Introduction
navTitle: User Guide
---


Database Compatibility for Oracle means that an application runs in an Oracle environment as well as in the EDB Postgres Advanced Server (Advanced Server) environment with minimal or no changes to the application code. Developing an application that is compatible with Oracle databases in the Advanced Server requires special attention to which features are used in the construction of the application. For example, developing a compatible application means choosing compatible:
 - System and built-in functions for use in SQL statements and procedural logic.
 - Stored Procedure Language (SPL) when creating database server-side application logic for stored procedures, functions, triggers, and packages.

<!-- end list -->
 - Data types that are compatible with Oracle databases
 - SQL statements that are compatible with Oracle SQL
 - System catalog views that are compatible with Oracle’s data dictionary

For detailed information about the compatible SQL syntax, data types, and views, please see the *Database Compatibility for Oracle Developers Reference Guide*.

The compatibility offered by the procedures and functions that are part of the Built-in packages is documented in the *Database Compatibility for Oracle Developers Built-in Packages Guide.*

For information about using the compatible tools and utilities (EDB\*Plus, EDB\*Loader, DRITA, and EDB\*Wrap) that are included with an Advanced Server installation, please see the *Database Compatibility for Oracle Developers Tools and Utilities Guide.*

For applications written using the Oracle Call Interface (OCI), EnterpriseDB’s Open Client Library (OCL) provides interoperability with these applications. For detailed information about using the Open Client Library, please see the *EDB Postgres Advanced Server OCI Connector Guide*.

Advanced Server contains a rich set of features that enables development of database applications for either PostgreSQL or Oracle. For more information about all of the features of Advanced Server, please consult the user documentation available at the EnterpriseDB website.

Advanced Server documentation is available at:

<http://www.enterprisedb.com/products-services-training/products/documentation>

## What’s New

The following database compatibility for Oracle features have been added to Advanced Server 9.6 to create Advanced Server 10:
 - Advanced Server now supports a BIGINT return value for SQL%ROWCOUNT. Previously, an INTEGER value was returned. For more information, see Section <span class="underline">3.4.8</span>.

## Typographical Conventions Used in this Guide

Certain typographical conventions are used in this manual to clarify the meaning and usage of various commands, statements, programs, examples, etc. This section provides a summary of these conventions.

In the following descriptions a *term* refers to any word or group of words which may be language keywords, user-supplied values, literals, etc. A term’s exact meaning depends upon the context in which it is used.
 - *Italic font* introduces a new term, typically, in the sentence that defines it for the first time.
 - Fixed-width (mono-spaced) font is used for terms that must be given literally such as SQL commands, specific table and column names used in the examples, programming language keywords, etc. For example, SELECT \* FROM emp;
 - *Italic fixed-width font* is used for terms for which the user must substitute values in actual usage. For example, DELETE FROM *table\_name*;
 - A vertical pipe | denotes a choice between the terms on either side of the pipe. A vertical pipe is used to separate two or more alternative terms within square brackets (optional choices) or braces (one mandatory choice).
 - Square brackets \[ \] denote that one or none of the enclosed term(s) may be substituted. For example, \[ a | b \], means choose one of “a” or “b” or neither of the two.
 - Braces {} denote that exactly one of the enclosed alternatives must be specified. For example, { a | b }, means exactly one of “a” or “b” must be specified.
 - Ellipses ... denote that the proceeding term may be repeated. For example, \[ a | b \] ... means that you may have the sequence, “b a a b a”.

## Configuration Parameters Compatible with Oracle Databases

EDB Postgres Advanced Server supports the development and execution of applications compatible with PostgreSQL and Oracle. Some system behaviors can be altered to act in a more PostgreSQL or in a more Oracle compliant manner; these behaviors are controlled by configuration parameters. Modifying the parameters in the postgresql.conf file changes the behavior for all databases in the cluster, while a user or group can SET the parameter value on the command line, effecting only their session. These parameters are:
 - edb\_redwood\_date – Controls whether or not a time component is stored in DATE columns. For behavior compatible with Oracle databases, set edb\_redwood\_date to TRUE. See Section <span class="underline"> </span> <span class="underline">1.3.1</span>.
 - edb\_redwood\_raw\_names – Controls whether database object names appear in uppercase or lowercase letters when viewed from Oracle system catalogs. For behavior compatible with Oracle databases, edb\_redwood\_raw\_names is set to its default value of FALSE. To view database object names as they are actually stored in the PostgreSQL system catalogs, set edb\_redwood\_raw\_names to TRUE. See Section <span class="underline">1.3.2</span>.
 - edb\_redwood\_strings – Equates null to an empty string for purposes of string concatenation operations. For behavior compatible with Oracle databases, set edb\_redwood\_strings to true. See Section <span class="underline">1.3.3</span>.
 - edb\_stmt\_level\_tx – Isolates automatic rollback of an aborted SQL command to statement level rollback only – the entire, current transaction is not automatically rolled back as is the case for default PostgreSQL behavior. For behavior compatible with Oracle databases, set edb\_stmt\_level\_tx to true; however, use only when absolutely necessary. See Section <span class="underline">1.3.4</span>.
 - oracle\_home – Point Advanced Server to the correct Oracle installation directory. See Section <span class="underline">1.3.5</span>.

### edb\_redwood\_date

When DATE appears as the data type of a column in the commands, it is translated to TIMESTAMP at the time the table definition is stored in the data base if the configuration parameter edb\_redwood\_date is set to true. Thus, a time component will also be stored in the column along with the date. This is consistent with Oracle’s DATE data type.

If edb\_redwood\_date is set to false the column’s data type in a CREATE TABLE or ALTER TABLE command remains as a native PostgreSQL DATE data type and is stored as such in the database. The PostgreSQL DATE data type stores only the date without a time component in the column.

Regardless of the setting of edb\_redwood\_date, when DATE appears as a data type in any other context such as the data type of a variable in an SPL declaration section, or the data type of a formal parameter in an SPL procedure or SPL function, or the return type of an SPL function, it is always internally translated to a TIMESTAMP and thus, can handle a time component if present.

See the *Database Compatibility for Oracle Developers Reference Guide* for more information about date/time data types.

### edb\_redwood\_raw\_names

When edb\_redwood\_raw\_names is set to its default value of FALSE, database object names such as table names, column names, trigger names, program names, user names, etc. appear in uppercase letters when viewed from Oracle catalogs (for a complete list of supported catalog views, see the *Database Compatibility for Oracle Developers Reference Guide*). In addition, quotation marks enclose names that were created with enclosing quotation marks.

When edb\_redwood\_raw\_names is set to TRUE, the database object names are displayed exactly as they are stored in the PostgreSQL system catalogs when viewed from the Oracle catalogs. Thus, names created without enclosing quotation marks appear in lowercase as expected in PostgreSQL. Names created with enclosing quotation marks appear exactly as they were created, but without the quotation marks.

For example, the following user name is created, and then a session is started with that user.

CREATE USER reduser IDENTIFIED BY password;

edb=\# \\c - reduser

Password for user reduser:

You are now connected to database "edb" as user "reduser".

When connected to the database as reduser, the following tables are created.

CREATE TABLE all\_lower (col INTEGER);

CREATE TABLE ALL\_UPPER (COL INTEGER);

CREATE TABLE "Mixed\_Case" ("Col" INTEGER);

When viewed from the Oracle catalog, USER\_TABLES, with edb\_redwood\_raw\_names set to the default value FALSE, the names appear in uppercase except for the Mixed\_Case name, which appears as created and also with enclosing quotation marks.

edb=\> SELECT \* FROM USER\_TABLES;

schema\_name | table\_name | tablespace\_name | status | temporary

\-------------+--------------+-----------------+--------+-----------

REDUSER | ALL\_LOWER | | VALID | N

REDUSER | ALL\_UPPER | | VALID | N

REDUSER | "Mixed\_Case" | | VALID | N

(3 rows)

When viewed with edb\_redwood\_raw\_names set to TRUE, the names appear in lowercase except for the Mixed\_Case name, which appears as created, but now without the enclosing quotation marks.

edb=\> SET edb\_redwood\_raw\_names TO true;

SET

edb=\> SELECT \* FROM USER\_TABLES;

schema\_name | table\_name | tablespace\_name | status | temporary

\-------------+------------+-----------------+--------+-----------

reduser | all\_lower | | VALID | N

reduser | all\_upper | | VALID | N

reduser | Mixed\_Case | | VALID | N

(3 rows)

These names now match the case when viewed from the PostgreSQL pg\_tables catalog.

edb=\> SELECT schemaname, tablename, tableowner FROM pg\_tables WHERE tableowner = 'reduser';

schemaname | tablename | tableowner

\------------+------------+------------

reduser | all\_lower | reduser

reduser | all\_upper | reduser

reduser | Mixed\_Case | reduser

(3 rows)

### edb\_redwood\_strings

In Oracle, when a string is concatenated with a null variable or null column, the result is the original string; however, in PostgreSQL concatenation of a string with a null variable or null column gives a null result. If the edb\_redwood\_strings parameter is set to true, the aforementioned concatenation operation results in the original string as done by Oracle. If edb\_redwood\_strings is set to false, the native PostgreSQL behavior is maintained.

The following example illustrates the difference.

The sample application introduced in the next section contains a table of employees. This table has a column named comm that is null for most employees. The following query is run with edb\_redwood\_string set to false. The concatenation of a null column with non-empty strings produces a final result of null, so only employees that have a commission appear in the query result. The output line for all other employees is null.

SET edb\_redwood\_strings TO off;

SELECT RPAD(ename,10) || ' ' || TO\_CHAR(sal,'99,999.99') || ' ' || TO\_CHAR(comm,'99,999.99') "EMPLOYEE COMPENSATION" FROM emp;

EMPLOYEE COMPENSATION

\----------------------------------

ALLEN 1,600.00 300.00

WARD 1,250.00 500.00

MARTIN 1,250.00 1,400.00

TURNER 1,500.00 .00

(14 rows)

The following is the same query executed when edb\_redwood\_strings is set to TRUE. Here, the value of a null column is treated as an empty string. The concatenation of an empty string with a non-empty string produces the non-empty string. This result is consistent with the results produced by Oracle for the same query.

SET edb\_redwood\_strings TO on;

SELECT RPAD(ename,10) || ' ' || TO\_CHAR(sal,'99,999.99') || ' ' || TO\_CHAR(comm,'99,999.99') "EMPLOYEE COMPENSATION" FROM emp;

EMPLOYEE COMPENSATION

\----------------------------------

SMITH 800.00

ALLEN 1,600.00 300.00

WARD 1,250.00 500.00

JONES 2,975.00

MARTIN 1,250.00 1,400.00

BLAKE 2,850.00

CLARK 2,450.00

SCOTT 3,000.00

KING 5,000.00

TURNER 1,500.00 .00

ADAMS 1,100.00

JAMES 950.00

FORD 3,000.00

MILLER 1,300.00

(14 rows)

### edb\_stmt\_level\_tx

In Oracle, when a runtime error occurs in a SQL command, all the updates on the database caused by that single command are rolled back. This is called *statement level transaction isolation*. For example, if a single UPDATE command successfully updates five rows, but an attempt to update a sixth row results in an exception, the updates to all six rows made by this UPDATE command are rolled back. The effects of prior SQL commands that have not yet been committed or rolled back are pending until a COMMIT or ROLLBACK command is executed.

In PostgreSQL, if an exception occurs while executing a SQL command, all the updates on the database since the start of the transaction are rolled back. In addition, the transaction is left in an aborted state and either a COMMIT or ROLLBACK command must be issued before another transaction can be started.

If edb\_stmt\_level\_tx is set to TRUE, then an exception will not automatically roll back prior uncommitted database updates, emulating the Oracle behavior. If edb\_stmt\_level\_tx is set to FALSE, then an exception will roll back uncommitted database updates.

**Note:** Use edb\_stmt\_level\_tx set to TRUE only when absolutely necessary, as this may cause a negative performance impact.

The following example run in PSQL shows that when edb\_stmt\_level\_tx is FALSE, the abort of the second INSERT command also rolls back the first INSERT command. Note that in PSQL, the command \\set AUTOCOMMIT off must be issued, otherwise every statement commits automatically defeating the purpose of this demonstration of the effect of edb\_stmt\_level\_tx.

\\set AUTOCOMMIT off

SET edb\_stmt\_level\_tx TO off;

INSERT INTO emp (empno,ename,deptno) VALUES (9001, 'JONES', 40);

INSERT INTO emp (empno,ename,deptno) VALUES (9002, 'JONES', 00);

ERROR: insert or update on table "emp" violates foreign key constraint "emp\_ref\_dept\_fk"

DETAIL: Key (deptno)=(0) is not present in table "dept".

COMMIT;

SELECT empno, ename, deptno FROM emp WHERE empno \> 9000;

empno | ename | deptno

\-------+-------+--------

(0 rows)

In the following example, with edb\_stmt\_level\_tx set to TRUE, the first INSERT command has not been rolled back after the error on the second INSERT command. At this point, the first INSERT command can either be committed or rolled back.

\\set AUTOCOMMIT off

SET edb\_stmt\_level\_tx TO on;

INSERT INTO emp (empno,ename,deptno) VALUES (9001, 'JONES', 40);

INSERT INTO emp (empno,ename,deptno) VALUES (9002, 'JONES', 00);

ERROR: insert or update on table "emp" violates foreign key constraint "emp\_ref\_dept\_fk"

DETAIL: Key (deptno)=(0) is not present in table "dept".

SELECT empno, ename, deptno FROM emp WHERE empno \> 9000;

empno | ename | deptno

\-------+-------+--------

9001 | JONES | 40

(1 row)

COMMIT;

A ROLLBACK command could have been issued instead of the COMMIT command in which case the insert of employee number 9001 would have been rolled back as well.

### oracle\_home

Before creating a link to an Oracle server, you must direct Advanced Server to the correct Oracle home directory. Set the LD\_LIBRARY\_PATH environment variable on Linux (or PATH on Windows) to the lib directory of the Oracle client installation directory.

For Windows only, you can instead set the value of the oracle\_home configuration parameter in the postgresql.conf file. The value specified in the oracle\_home configuration parameter will override the Windows PATH environment variable.

The LD\_LIBRARY\_PATH environment variable on Linux (PATH environment variable or oracle\_home configuration parameter on Windows) must be set properly each time you start Advanced Server.

When using a Linux service script to start Advanced Server, be sure LD\_LIBRARY\_PATH has been set within the service script so it is in effect when the script invokes the pg\_ctl utility to start Advanced Server.

**For Windows only:** To set the oracle\_home configuration parameter in the postgresql.conf file, edit the file, adding the following line:

> oracle\_home = '*lib\_directory* '

Substitute the name of the Windows directory that contains oci.dll for *lib\_directory*.

After setting the oracle\_home configuration parameter, you must restart the server for the changes to take effect. Restart the server from the Windows Services console.

## About the Examples Used in this Guide

The examples shown in this guide are illustrated using the PSQL program. The prompt that normally appears when using PSQL is omitted in these examples to provide extra clarity for the point being demonstrated.

> Examples and output from examples are shown in fixed-width, blue font on a light blue background.

Also note the following points:
 - During installation of the EDB Postgres Advanced Server the selection for configuration and defaults compatible with Oracle databases must be chosen in order to reproduce the same results as the examples shown in this guide. A default compatible configuration can be verified by issuing the following commands in PSQL and obtaining the same results as shown below.

> SHOW edb\_redwood\_date;
>
> edb\_redwood\_date
>
> \------------------
>
> on
>
> SHOW datestyle;
>
> DateStyle
>
> \--------------
>
> Redwood, DMY
>
> SHOW edb\_redwood\_strings;
>
> edb\_redwood\_strings
>
> \---------------------
>
> on
 - The examples use the sample tables, dept, emp, and jobhist, created and loaded when Advanced Server is installed. The emp table is installed with triggers that must be disabled in order to reproduce the same results as shown in this guide. Log onto Advanced Server as the enterprisedb superuser and disable the triggers by issuing the following command.

> ALTER TABLE emp DISABLE TRIGGER USER;

The triggers on the emp table can later be re-activated with the following command.

> ALTER TABLE emp ENABLE TRIGGER USER;

