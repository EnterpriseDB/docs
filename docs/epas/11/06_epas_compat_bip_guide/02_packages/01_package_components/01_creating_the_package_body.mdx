---

title: "Package Body Syntax"
---

<div id="package_body_syntax" class="registered_link"></div>

Package implementation details reside in the package body; the package body may contain objects that are not visible to the package user. Advanced Server supports the following syntax for the package body:

> `CREATE [ OR REPLACE ] PACKAGE BODY` *`package_name`*
>
>   `{ IS | AS }`
>
>   `[` `*private_declaration;* ] ...`
>
>  `[` *`procedure_or_function_definition`* `] *...*`
>
>  `[` *`package_initializer`* `]`
>
> `END [` *`package_name`* `] ;`

Where *`procedure_or_function_definition`* `:=`

> *`procedure_definition`* `|` *`function_definition`*

Where *`procedure_definition`* `:=`

> `PROCEDURE` *`proc_name`*`[` *`argument_list`* `]`
>
>   `[` *`options_list`* `]`
>
>   `{ IS | AS }`
>
>  *`procedure_body`*
>
>  `END [` *`proc_name`* `] ;`

Where *`procedure_body`* `:=`

> `[ PRAGMA AUTONOMOUS_TRANSACTION; ]`
>
> `[` *`declaration`*`; ] [, ...]`
>
> `BEGIN`
>
>  *`statement`*`; [...]`
>
> `[ EXCEPTION`
>
>    `{ WHEN` *`exception`* `[OR` *`exception`*`] [...]] THEN` *`statement`*`; }`
>
>    [`...]`
>
> `]`

Where *`function_definition`* `:=`

> `FUNCTION` *`func_name`* `[` *`argument_list`* `]`
>
>   `RETURN` *`rettype`* `[` `DETERMINISTIC` `]`
>
>   `[` *`options_list`* `]`
>
>   `{ IS | AS }`
>
>  *`function_body`*
>
>  `END [` *`func_name`* `] ;`

Where *`function_body`* `:=`

> `[ PRAGMA AUTONOMOUS_TRANSACTION; ]`
>
> `[` *`declaration`*`; ] [, ...]`
>
> `BEGIN`
>
>  *`statement`*`; [...]`
>
> `[ EXCEPTION`
>
>   `{ WHEN` *`exception`* `[ OR` *`exception`* `] [...] THEN` *`statement`*`; }`
>
>   `[...]`
>
> `]`

Where *`argument_list`* :=

> `(` *`argument_declaration`* `[, ...] )`

Where *`argument_declaration`* :=

> *`argname`* `[ IN | IN OUT | OUT ]` *`argtype`* `[ DEFAULT` *`value`* `]`

Where *`options_list`* `:=`

> *`option`* `[ ... ]`

Where *`option`* `:=`

> `STRICT`
> `LEAKPROOF`
>
> `PARALLEL { UNSAFE | RESTRICTED | SAFE }`
>
> `COST` *`execution_cost`*
>
> `ROWS` *`result_rows`*
>
> `SET` *`config_param`* `{ TO` *`value`* ~ *`value`* `| FROM CURRENT }`

Where *`package_initializer`* `:=`

> `BEGIN`
>
>  *`statement`;* `[...]`
>
> `END``;`

**Parameters**

*`package_name`*

> *`package_name`* is the name of the package for which this is the package body. There must be an existing package specification with this name.

*`private_declaration`*

> *`private_declaration`* is an identifier of a private variable that can be accessed by any procedure or function within the package. There can be zero, one, or more private variables. *`private_declaration`* can be any of the following:
>
> - Variable Declaration
> - Record Declaration
> - Collection Declaration
> - REF CURSOR and Cursor Variable Declaration
> - TYPE Definitions for Records, Collections, and REF CURSORs
> - Exception
> - Object Variable Declaration

*`proc_name`*

> The name of the procedure being created.

`PRAGMA AUTONOMOUS_TRANSACTION`

> `PRAGMA AUTONOMOUS_TRANSACTION` is the directive that sets the procedure as an autonomous transaction.

*`declaration`*

> A variable, type, `REF CURSOR,` or subprogram declaration. If subprogram declarations are included, they must be declared after all other variable, type, and `REF CURSOR` declarations.

*`statement`*

> An SPL program statement. Note that a `DECLARE - BEGIN - END` block is considered an SPL statement unto itself. Thus, the function body may contain nested blocks.

*`exception`*

> An exception condition name such as `NO_DATA_FOUND, OTHER`S, etc.

*`func_name`*

> The name of the function being created.

*`rettype`*

> The return data type, which may be any of the types listed for *`argtype`*. As for *`argtype`*, a length must not be specified for *`rettype`*.

`DETERMINISTIC`

> Include `DETERMINISTIC` to specify that the function will always return the same result when given the same argument values. A `DETERMINISTIC` function must not modify the database.
>
> Note: the `DETERMINISTIC` keyword is equivalent to the PostgreSQL `IMMUTABLE` option.
>
> Note: If `DETERMINISTIC` is specified for a public function in the package body, it must also be specified for the function declaration in the package specification. (For private functions, there is no function declaration in the package specification.)
>

`PRAGMA AUTONOMOUS_TRANSACTION`

> `PRAGMA AUTONOMOUS_TRANSACTION` is the directive that sets the function as an autonomous transaction.

*`declaration`*

> A variable, type, `REF CURSOR`, or subprogram declaration. If subprogram declarations are included, they must be declared after all other variable, type, and `REF CURSOR` declarations.

*`argname`*

> The name of a formal argument. The argument is referenced by this name within the procedure body.

`IN | IN OUT | OUT`

> The argument mode. `IN` declares the argument for input only. This is the default. `IN OUT` allows the argument to receive a value as well as return a value. OU~T specifies the argument is for output only.

*`argtype`*

> The data type(s) of an argument. An argument type may be a base data type, a copy of the type of an existing column using `%TYPE`, or a user-defined type such as a nested table or an object type. A length must not be specified for any base type - for example, specify `VARCHAR2`, not `VARCHAR2(10)`.
>
> The type of a column is referenced by writing *`tablename.columnname`*`%TYPE;` using this can sometimes help make a procedure independent from changes to the definition of a table.
>

`DEFAULT` *`value`*

> The `DEFAULT` clause supplies a default value for an input argument if one is not supplied in the procedure call. `DEFAULT` may not be specified for arguments with modes `IN OUT` or `OUT`.
>
> Please note: the following options are not compatible with Oracle databases; they are extensions to Oracle package syntax provided by Advanced Server only.
>

`STRICT`

> The `STRICT` keyword specifies that the function will not be executed if called with a `NULL` argument; instead the function will return `NULL`.

`LEAKPROOF`

> The `LEAKPROOF` keyword specifies that the function will not reveal any information about arguments, other than through a return value.

`PARALLEL { UNSAFE | RESTRICTED | SAFE }`

> The `PARALLEL` clause enables the use of parallel sequential scans (parallel mode). A parallel sequential scan uses multiple workers to scan a relation in parallel during a query in contrast to a serial sequential scan.
>
> When set to `UNSAFE`, the procedure or function cannot be executed in parallel mode. The presence of such a procedure or function forces a serial execution plan. This is the default setting if the `PARALLEL` clause is omitted.
>
> When set to `RESTRICTED`, the procedure or function can be executed in parallel mode, but the execution is restricted to the parallel group leader. If the qualification for any particular relation has anything that is parallel restricted, that relation won't be chosen for parallelism.
>
> When set to `SAFE`, the procedure or function can be executed in parallel mode with no restriction.
>

*`execution_cost`*

> *`execution_cost`* specifies a positive number giving the estimated execution cost for the function, in units of `cpu_operator_cost`. If the function returns a set, this is the cost per returned row. The default is `0.0025`.

*`result_rows`*

> *`result_rows`* is the estimated number of rows that the query planner should expect the function to return. The default is ~.

`SET`

Use the `SET` clause to specify a parameter value for the duration of the function:

> *`config_param`* specifies the parameter name.
>
> *`value`* specifies the parameter value.
>
> `FROM CURRENT` guarantees that the parameter value is restored when the function ends.

*`package_initializer`*

> The statements in the *package*_*`initializer`* are executed once per userâ€™s session when the package is first referenced.

Please Note: The `STRICT`, `LEAKPROOF`, `PARALLEL`, `COST`, `ROWS` and `SET` keywords provide extended functionality for Advanced Server and are not supported by Oracle.