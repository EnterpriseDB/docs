---

title: "Using PL/Java"
---

<div id="using_pl_java" class="registered_link"></div>

To create a PL/Java program, you must first create a Java class that contains at least one static method, and then you must compile that class into a `.class` or `.jar` file. Next, you declare the Java function within SQL using the `CREATE FUNCTION` command. The `CREATE FUNCTION` command gives a SQL name to the function and associates the compiled class (and method name) with that function name.

For example, the following `CREATE FUNCTION` statement creates a function named `getsysprop`:

```
CREATE FUNCTION getsysprop(VARCHAR)
RETURNS VARCHAR
AS 'java.lang.System.getProperty'
LANGUAGE java;
```

When invoked, `getsysprop` will execute the `getProperty` (static) method defined within the `java.lang.System` class.

```
SELECT getsysprop('user.home');

  getsysprop
---------------
 /usr/edb/as11
(1 row)
```

The example that follows demonstrates the procedures used to create and install a simple `HelloWorld` program:

**Step 1:** Save the following code sample to a file named `HelloWorld.java`:

```
package com.mycompany.helloworld;
public class HelloWorld
{
    public static String helloWorld()
    {
      return "Hello World";
    }
}
```

**Step 2:** Compile the file.

```
$ javac HelloWorld.java
```

And save it in a folder hierarchy as:

> `com/mycompany/helloworld/HelloWorld.class`

**Step 3:** Create an archive file (a JAR file) named `helloworld.jar`:

```
jar cf helloworld.jar com/mycompany/helloworld/HelloWorld.class
```

**Step 4:** Open the `edb-psql` client, and install the jar file with the following command:

> `SELECT sqlj.install_jar('file:///*file_path*/helloworld.jar', 'helloworld', true);`

Where *`file_path`* is the directory containing the `helloworld.jar` file. For example, if the `/tmp` directory is the *`file_path`*:

```
SELECT sqlj.install_jar('file:///tmp/helloworld.jar', 'helloworld', true);
```

To confirm that the jar file has been loaded correctly, perform a `SELECT` statement on the `sqlj.jar_entry` and `sqlj.jar_repository` tables.

```
edb=# SELECT entryid, entryname FROM sqlj.jar_entry;
 entryid |                 entryname
---------+-------------------------------------------
       1 | com/mycompany/helloworld/HelloWorld.class
(1 row)

edb=# SELECT jarid, jarname, jarorigin, jarowner FROM sqlj.jar_repository;
 jarid |  jarname   |         jarorigin          |   jarowner
-------+------------+----------------------------+--------------
     4 | helloworld | file:///tmp/helloworld.jar | enterprisedb
(1 row)
```

**Step 5:** Set the `classpath` as:

```
edb=# SELECT sqlj.set_classpath('public', 'helloworld');
```

The `sqlj.classpath_entry` table will now include an entry for the `helloworld` class file.

```
edb=# SELECT * FROM sqlj.classpath_entry;
 schemaname | ordinal | jarid
------------+---------+-------
 public     |       1 |     4
(1 row)
```

**Step 6:** Create a function that uses Java to call the static function declared in the jar file:

```
CREATE OR REPLACE FUNCTION helloworld()
RETURNS "varchar"
AS
    'com.mycompany.helloworld.HelloWorld.helloWorld'
LANGUAGE 'java' VOLATILE;
```

Step 7: Execute the function:

```
edb=# SELECT * FROM helloworld();
```

You should see the output:

```
helloworld
-------------
 Hello World
(1 row)
```

The official PL/Java distribution is distributed with examples and documentation. For more information about using PL/Java, see the project page at:

https://github.com/tada/pljava/wiki

**Notes:**

The PL/Java package is deprecated in Advanced Server 11 and will be unavailable in server versions 12 or later.