---

title: "Customizable WAL Segment File Size"
---

<div id="customizable_wal_segment_file_size" class="registered_link"></div>

When a database cluster is created with the `initdb` utility program, the default size of each WAL segment file is 16 MB.

The Advanced Server `initdb` utility provides an additional `--wal-segsize` option to specify the size of WAL segment files when creating a new data base cluster.

`initdb --wal-segsize=`*`size`* `[` *options* `]... -D` *`directory`*

*`size`* is the WAL segment file size in megabytes, which must be a power of 2 (for example, 1, 2, 4, 8, 16, 32, etc.). The minimum permitted value of *`size`* is 1 and the maximum permitted value is 1024. The database cluster is to be created in *`directory`*.

For more information on the `initdb` utility and its other *`options`*, see the PostgreSQL core documentation available at:

https://www.postgresql.org/docs/11/static/app-initdb.html

The following example shows the creation of a database cluster where the WAL segment file size is specified as 1024 MB (equivalent to 1 GB).

```
bash-4.1$ initdb -D /opt/data_1024 -U enterprisedb --wal-segsize 1024
The files belonging to this database system will be owned by user "enterprisedb".
This user must also own the server process.

The database cluster will be initialized with locale "en_US.UTF-8".
The default database encoding has accordingly been set to "UTF8".
The default text search configuration will be set to "english".

Data page checksums are disabled.

fixing permissions on existing directory /opt/data_1024 ... ok
creating subdirectories ... ok
selecting default max_connections ... 100
selecting default shared_buffers ... 128MB
selecting dynamic shared memory implementation ... posix
creating configuration files ... ok
running bootstrap script ... ok
performing post-bootstrap initialization ... ok
creating edb sys ... ok
loading edb contrib modules ...
edb_redwood_bytea.sql ok
edb_redwood_date.sql ok
dbms_alert_public.sql ok
                    .
                    .
                    .
Success. You can now start the database server using:

    pg_ctl -D /opt/data_1024 -l logfile start
```

The following shows the WAL file as 1.0 GB:

```
bash-4.1$ pwd
/opt/data_1024/pg_wal
bash-4.1$ ls -lh
total 1.1G
-rw------- 1 enterprisedb enterprisedb 1.0G Jul 24 14:42 000000010000000000000001
drwx------ 2 enterprisedb enterprisedb 4.0K Jul 24 14:42 archive_status
```

After the database server is started, the display of the `wal_segment_size` parameter also confirms the file size:

```
edb=# SHOW wal_segment_size;
 wal_segment_size
------------------
 1GB
(1 row)
```

