---
title: Querying Delta tables in S3-compatible object storage
navTitle: External Tables
description: Access and Query data in S3-compatible object storage using External Tables
deepToC: true
---

## Overview

External tables allow you to access and query data stored in S3-compatible object storage using SQL. You can create an external table that references data in S3-compatible object storage and query the data using standard SQL commands.

## Prerequisites

An EDB Postgres AI account and a Lakehouse node.

## Creating an External Storage Location

The first step is to create an external storage location which references S3-compatible object storage where your data resides. This is done by using SQL to execute the `pgaa.create_storage_location` function. `pgaa` is the name of the extension and namespace that provides the functionality to query external storage locations.

The following example creates an external table that references an S3-compatible object storage location:

```sql
SELECT pgaa.create_storage_location('sample-data', 's3://pgaa-sample-data-eu-west-1');
```

The function takes a name for the new storage location, and the URI of the S3-compatible object storage location.

## Creating an External Table

After creating the external storage location, you can create an external table that references the data in the storage location. The following example creates an external table that references a Delta table in the S3-compatible object storage location:

```sql
CREATE TABLE public.customer () USING PGAA WITH (pgaa.storage_location = 'sample-data', pgaa.path = 'tpch_sf_1/customer');
```

## Querying an External Table

After creating the external table, you can query the data in the external table using standard SQL commands. The following example queries the external table created in the previous step:

```sql
SELECT COUNT(*) FROM public.customer;
```




