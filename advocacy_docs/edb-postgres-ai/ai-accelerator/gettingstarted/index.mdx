---
title: "Getting Started with Pipelines"
navTitle: "Getting Started"
description: "How to get started with AI Accelerator Pipelines."
---

## Where to Start

The best place to start is with the [Pipelines Overview](/edb-postgres-ai/ai-accelerator/overview) to get an understanding of what Pipelines is and how it works.

## Installation

Pipelines is included with the EDB Postgres AI - AI Accelerator suite of tools. To install Pipelines, follow the instructions in the [AI Accelerator Installation Guide](/edb-postgres-ai/ai-accelerator/installing).

## Using Pipelines

Once you have Pipelines installed, you can start using it to work with your data.

Log in to your Postgres server.

First ensure the Pipelines extension is installed:

```sql
CREATE EXTENSION aidb CASCADE;
```

We'll be working solely with Postgres table data for this example, so we won't need to install the pgfs extension.

Let's also create an example table to work with:

```sql
CREATE TABLE products (
   id SERIAL PRIMARY KEY,
   product_name TEXT NOT NULL,
   description TEXT,
   last_updated_at TIMESTAMP WITH TIME ZONE DEFAULT CURRENT_TIMESTAMP
);
__OUTPUT__
CREATE TABLE
```

And let's insert some data:

```sql
INSERT INTO products (product_name, description) VALUES
      ('Hamburger', 'Tasty'),
      ('Cheesburger', 'Very tasty'),
      ('Fish n Chips', 'Naa'),
      ('Fries', 'Dunno'),
      ('Burrito', 'Always'),
      ('Pizza', 'Mkay'),
      ('Sandwich', 'So what'),
      ('Veggie Burger', 'Go away'),
      ('Kebab', 'Maybe');
__OUTPUT__
INSERT 0 9
```

So now we have a table with some data in it, food products and some very personal opinions about them.

## Registering a Retriever

The first step to using Pipelines with this data is to register a retriever. A retriever is a way to access the data in the table and use it in AI workflows.

```sql
select aidb.register_retriever_for_table('products_retriever', 't5', 'products', 'description', 'Text');
__OUTPUT__
 register_retriever_for_table
------------------------------
 products_retriever
(1 row)
```

## Querying the retriever

Now that we have a retriever registered, we can query it to get similar results based on the data in the table.

```sql
select * from aidb.retrieve_key('products_retriever','I like it',5);
__OUTPUT__
ERROR:  Query returned no data. Hint: The "products_retriever_vector" table is likely empty. Make sure the embeddings have been computed.
```

First, we haven't computed embeddings for our retriever yet. 
The `products_retriever_vector` table is where aidb keeps the computed embeddings for the retriever. 
Let's compute those embeddings now using `aidb.bulk_embedding`:

```sql
select aidb.bulk_embedding('products_retriever');
__OUTPUT__
INFO:  bulk_embedding_text found 9 rows in retriever products_retriever
 bulk_embedding
----------------

(1 row)
```

Now we can query the retriever again:

```sql
select * from aidb.retrieve_key('products_retriever','I like it',5);
__OUTPUT__
 key |      distance
-----+--------------------
 2   | 1.0834343141784568
 6   | 1.0960655768886878
 9   | 1.1035322069930866
 1   | 1.1396677886705955
(4 rows)
```

Now we have some results. The `key` column is the primary key of the row in the `products` table, and the `distance` column is the distance between the query and the result. The lower the distance, the more similar the result is to the query.

What we really want is the actual matching text, not just the key. We can use `aidb.retrieve_text` for that:

```sql
select * from aidb.retrieve_text('products_retriever','I like it',4);
__OUTPUT__
 key |   value    |      distance
-----+------------+--------------------
 2   | Very tasty | 1.0834343141784568
 6   | Mkay       | 1.0960655768886878
 9   | Maybe      | 1.1035322069930866
 1   | Tasty      | 1.1396677886705955
(4 rows)
```

Now we have the actual data from the table that matches the query.

You may want the row data from the `products` table instead of the `products_retriever_vector` table. You can do that by joining the two tables:

```sql
 select * from aidb.retrieve_key('products_retriever','I like it',4) as a 
            left join products as b 
            on a.key=b.id;
__OUTPUT__
 key |      distance      | id | product_name | description |         last_updated_at
-----+--------------------+----+--------------+-------------+----------------------------------
 1   | 1.1396677886705955 |  1 | Hamburger    | Tasty       | 04-DEC-24 14:44:24.295956 +00:00
 2   | 1.0834343141784568 |  2 | Cheesburger  | Very tasty  | 04-DEC-24 14:44:24.295956 +00:00
 6   | 1.0960655768886878 |  6 | Pizza        | Mkay        | 04-DEC-24 14:44:24.295956 +00:00
 9   | 1.1035322069930866 |  9 | Kebab        | Maybe       | 04-DEC-24 14:44:24.295956 +00:00
 (4 rows)
```

Now you have the actual data from the `products` table that matches the query and as you can see, the full power of Postgres is available to you to work with your AI workflows.

## One more thing, auto-embedding

As it stands vectors have been calculated for our data, but if we added data to the table it wouldn't be automatically embedded. The retriever would go out of sync.

To keep the embeddings up to date, we can enable auto-embedding:

```sql
select aidb.enable_auto_embedding_for_table('products_retriever');
__OUTPUT__
  enable_auto_embedding_for_table
---------------------------------

(1 row)
```

Now, if we add data to the table, the embeddings will be automatically calculated. We can quickly test this:

```sql
INSERT INTO products (product_name, description) VALUES
      ('Pasta', 'Yum'),
      ('Salad', 'Meh');
__OUTPUT__
NOTICE:  Running auto embedding for retriever products. key: "10" content: "Yum"
NOTICE:  Running auto embedding for retriever products. key: "11" content: "Meh"
INSERT 0 2
```


```sql
select * from aidb.retrieve_key('products_retriever','I like it',4) as a
            left join products as b
            on a.key=b.id;
__OUTPUT__
 key |      distance      | id | product_name | description |         last_updated_at
-----+--------------------+----+--------------+-------------+----------------------------------
 11  | 1.0704687519599672 | 11 | Salad        | Meh         | 04-DEC-24 15:10:46.502872 +00:00
 2   | 1.0834343141784568 |  2 | Cheesburger  | Very tasty  | 04-DEC-24 14:44:24.295956 +00:00
 6   | 1.0960655768886878 |  6 | Pizza        | Mkay        | 04-DEC-24 14:44:24.295956 +00:00
 9   | 1.1035322069930866 |  9 | Kebab        | Maybe       | 04-DEC-24 14:44:24.295956 +00:00
(4 rows)
```

## Further reading

In the [Models](models) section, you can learn how to register more models with Pipelines, including external models from OpenAI API compatible services.

In the [Retrievers](retrievers) section, you can learn more about how to use retrievers with external data sources, local files or S3 storage, and how to use the retriever functions to get the data you need.
