---
title: Creating or configuring a GKE cluster for Hybrid Manager
navTitle: Create GKE cluster
deepToC: true
---

## GKE cluster

You need a GKE cluster to install Hybrid Manager (HM) onto.
Follow the documentation on [Creating a regional cluster](https://cloud.google.com/kubernetes-engine/docs/how-to/creating-a-regional-cluster) in the GKE docs to set up a new one, if needed.

### Permissions

Ensure you have the permission `Kubernetes Engine Admin` in `roles/container.admin`.

### Different node types

HM supports running management services (HM control plane) and PostgreSQL workloads on different sets of nodes on GKE, requiring additional node pools.

To implement the different node sets, follow these steps:

#### HM control plane nodes

To make the HM control plane nodes a logical grouping that can be implemented with their own node type:

1. In your labels, set the following:

    ```bash
    edbaiplatform.io/control-plane: "true"
    ```

1. In your taints, set the following:

    ```bash
    key: edbaiplatform.io/control-plane
    value: "true"
    effect: NoSchedule
    ```

#### PostgreSQL workload nodes

To make the Postgres workload nodes a logical grouping that can be implemented with their own node type:

1. In your labels, set the following:

    ```bash
    edbaiplatform.io/postgres: "true"
    ```

1. In your taints, set the following:

    ```bash
    key: edbaiplatform.io/postgres
    value: "true"
    effect: NoSchedule
    ```

For more information on how to append labels and taints for GKE managed node groups, see the documentation [here](https://cloud.google.com/kubernetes-engine/docs/how-to/isolate-workloads-dedicated-nodes#taint-label-node-pool).

### Configure object STORAGE_CLASS

HM users must provide their own object storage.
See [this documentation]() to configure your object storage for HM on GKE using a GCP Bucket.

### Create a AES-256 Key

Generate an AES-256 key for authentication.

```bash
export AES_256_KEY=$(openssl rand -base64 32)
```

### Sync HM container images to your private registry

A requirement to use HM is that you must host your own secure and approved internal registry.
You also need to know what version of HM you want to install.
The sync process is basically to take all the artifacts from Cloudsmith and sync them internally to the internal registry before installing or upgrading HM with the relevant Helm chart.

The sync process preserves the container images SHA256 to ensure the images security and immutability across different environments.

To perform the process:

1. Install [skopeo](https://github.com/containers/skopeo), as you use this tool to do the sync.

1. Configure the HM release to be synced:

```bash
export EDBPGAI_RELEASE=<your-release-version>
```

1. Configure the EDB Cloudsmith access token:

```bash



