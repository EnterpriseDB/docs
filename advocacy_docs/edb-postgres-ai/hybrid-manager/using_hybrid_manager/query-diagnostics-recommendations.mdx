---
title: Using query recommendations in Hybrid Manager
navTitle: Query Recommendations
description: Learn how Hybrid Manager displays query recommendations and how to use them to improve query performance.
---

# Using query recommendations in Hybrid Manager

Query recommendations in Hybrid Manager help you continuously improve the performance of your database workloads.

By correlating detailed query diagnostics with actionable recommendations, Hybrid Manager enables you to:

- Identify which queries are slowing down your systems.
- Understand how to optimize those queries.
- Take action to reduce query latency and resource consumption.

## Who uses query recommendations?

Query recommendations are valuable for:

- **DBAs and platform engineers** tuning database performance.
- **Data engineers** optimizing data pipelines and batch jobs.
- **Developers** diagnosing application performance bottlenecks.
- **SREs and observability teams** monitoring database health across environments.

## What are query recommendations?

Hybrid Manager collects in-depth query diagnostics and analyzes them using **Query Advisor**. The platform identifies opportunities to optimize your workload, including:

- **Index recommendations** to improve data retrieval performance.
- **Statistics recommendations** to improve query planning and execution accuracy.

These recommendations are surfaced in the Hybrid Manager UI to guide you through optimization opportunities.

## Why use query recommendations?

Query recommendations help you:

- Improve query performance with minimal manual tuning.
- Focus your efforts on optimizations with measurable impact.
- Reduce database load and infrastructure costs.
- Ensure consistent performance as workloads evolve.
- Monitor the effectiveness of applied optimizations over time.

## When to use query recommendations

Use query recommendations as part of your regular performance tuning process:

- During initial onboarding of new applications.
- After significant changes to application logic or schema.
- When observing performance degradation or resource spikes.
- As part of ongoing database health checks and reviews.

Query recommendations help you move from reactive troubleshooting to proactive optimization.

## How query recommendations work

Hybrid Manager collects query diagnostics data, including:

- Query latency and execution patterns.
- Wait state analysis (via EDB Wait States or `pg_stat_monitor`).
- Workload trends and query frequency.

**Query Advisor** analyzes this data and generates optimization recommendations. These are exposed in two key areas of the UI:

- The **Query Diagnostics** tab — where recommendations are shown inline with individual queries.
- The **Recommendations** tab — where all current recommendations for the selected database or cluster are listed.

You can move seamlessly from diagnosing a problematic query to understanding and applying the relevant recommendation.

## Workflow: From query to optimization

To use query recommendations:

1. Open the **Query Diagnostics** tab for your cluster.
2. Select a time range and review query performance.
3. Look for queries with associated recommendations — these are visually indicated in the query list.
4. Select the recommendation to open the **Recommendations** tab, with the relevant recommendation highlighted.
5. Review the recommendation details, including:
 - The impact on the selected query.
 - Any other queries that will benefit.
 - Guidance on applying the optimization.
6. Apply the recommendation (for example, by creating an index or updating statistics).
7. Monitor the query over time to validate performance improvements.

## Requirements for external clusters

To view query recommendations for external (non-Hybrid Manager) clusters:

- The `query_wait_states` extension must be enabled.
- The **Query Advisor** extension must be enabled.
- The Hybrid Manager **beacon agent** must be installed and running.

Without these components, Hybrid Manager cannot collect the necessary data to generate recommendations.

## Example scenarios

Here are typical scenarios where query recommendations provide value:

- **Slow application pages:** You identify a frequent query with high latency in **Query Diagnostics**. A recommendation suggests adding an index on a filter column, significantly improving response time.
- **ETL job optimization:** A batch job is taking longer over time. Query Diagnostics reveals certain aggregate queries are poorly planned. Updating statistics based on a recommendation restores optimal performance.
- **Proactive tuning:** You regularly review recommendations across your clusters and apply targeted optimizations to maintain consistent performance as data volumes grow.
- **Migration support:** After migrating workloads to Hybrid Manager, you use recommendations to fine-tune queries for the new environment.

## Supported recommendation types

Hybrid Manager currently supports:

- **Index recommendations** — such as adding a missing index on a frequently used column.
- **Statistics recommendations** — such as refreshing outdated statistics to improve planner accuracy.

Additional recommendation types are planned for future releases.

## Related information

- [Query Diagnostics](../using_hybrid_manager/cluster_management/view_clusters/cluster-query-diagnostics-tab)
- [Recommendations tab](../using_hybrid_manager/cluster_management/view_clusters/cluster-overview-tab)
