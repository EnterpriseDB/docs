---
title: Configure PGD node group for analytics offload
navTitle: Configure PGD offload
description: Learn how to configure a PGD node group in Hybrid Manager to offload data to object storage for Tiered Tables.
---

# Configure PGD node group for analytics offload

After configuring a PGFS storage location, you must configure your PGD node group to offload analytics data for Tiered Tables.

You can choose to:

- Offload without a catalog (simpler setup â€” filesystem-based Iceberg tables)
- Offload to an Iceberg catalog (recommended for interoperability)

## Prerequisites

- PGD cluster provisioned in Hybrid Manager
- PGFS storage location created (see [Configure PGFS storage for Tiered Tables](./configure-tiered-pgfs))
- (Optional) Iceberg catalog configured and accessible (see [Configure Iceberg catalog connection](../configure-iceberg-catalog))

## Offloading without a catalog

1. Identify your PGD node group:

SELECT node_group_name FROM bdr.node_group;

Example result: `edb_pgdx_node_group_1`

2. Set the node group option `analytics_storage_location`:

SELECT bdr.alter_node_group_option(
'edb_pgdx_node_group_1',
'analytics_storage_location',
'hm_tiered_analytics_store'
);

- Replace `'hm_tiered_analytics_store'` with your PGFS storage location name.

## Offloading with an Iceberg catalog

1. Ensure your catalog is configured and attached:

```
SELECT pgaa.add_catalog('hm_main_lakekeeper', ...);
SELECT pgaa.attach_catalog('hm_main_lakekeeper');
```

2. Set the node group option `analytics_write_catalog`:

```
SELECT bdr.alter_node_group_option(
'edb_pgdx_node_group_1',
'analytics_write_catalog',
'hm_main_lakekeeper'
);
```

- Replace `'hm_main_lakekeeper'` with your catalog name.

## Validate the configuration

```
SELECT * FROM bdr.node_group_option WHERE node_group_name = 'edb_pgdx_node_group_1';
```
You should see either:

- `analytics_storage_location` set (no catalog), or
- `analytics_write_catalog` set (using a catalog).

## Notes

- You must set **either** `analytics_storage_location` **or** `analytics_write_catalog`, not both.
- When using a catalog, PGD will offload to Iceberg tables managed by the catalog.
- When not using a catalog, PGD will offload directly to Iceberg filesystem paths under your PGFS location.

## Related How-Tos

- [Configure PGFS storage for Tiered Tables](./configure-tiered-pgfs)
- [Configure BDR AutoPartition with analytics offload](./configure-tiered-autopartition)
- [Query Tiered Tables from PGD and Lakehouse](./query-tiered-tables)
- [Monitor Tiered Tables status and storage savings](./monitor-tiered-tables)
