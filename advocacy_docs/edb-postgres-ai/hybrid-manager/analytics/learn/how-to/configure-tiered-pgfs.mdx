---
title: Configure PGFS storage for Tiered Tables
navTitle: Configure PGFS
description: Learn how to configure a PGFS storage location in Hybrid Manager to use for Tiered Table offloading.
---

# Configure PGFS storage for Tiered Tables

To enable Tiered Tables, you must configure a PGFS storage location on your PGD cluster. This defines where PGD will offload "cold" data (as Iceberg tables) to object storage.

You can use an S3-compatible object store (e.g. AWS S3, Google Cloud Storage, or compatible private storage).

## Prerequisites

- PGD cluster provisioned in Hybrid Manager
- Object storage bucket created
- Access credentials (if using private bucket)

## Steps

1. Connect to your PGD node using psql or your preferred SQL client.

2. Run pgfs.create_storage_location():

Example — public S3 bucket:

```
SELECT pgfs.create_storage_location(
name => 'hm_tiered_analytics_store',
url => 's3://your-public-bucket/path/to/tiered-data',
options => '{"aws_skip_signature": "true"}',
credentials => '{}'
);
```

Example — private S3 bucket:

```SELECT pgfs.create_storage_location(
name => 'hm_tiered_analytics_store',
url => 's3://your-private-bucket/path/to/tiered-data',
options => '{"region": "us-west-2"}',
credentials => '{"access_key_id": "YOUR_AWS_ACCESS_KEY_ID", "secret_access_key": "YOUR_AWS_SECRET_ACCESS_KEY"}'
);
```

- Replace the `url` with your target bucket path.
- Adjust `options` and `credentials` for your cloud provider.

3. Validate that the PGFS storage location was created:

```
SELECT * FROM pgfs.storage_location;
```
You should see your storage location listed.

## Notes

- You can create multiple PGFS storage locations and assign them to different PGD node groups.
- Use distinct prefixes (paths) per PGD node group if multiple node groups are offloading to the same bucket.

## Related How-Tos

- [Configure PGD node group for analytics offload](./configure-tiered-offload)
- [Configure BDR AutoPartition with analytics offload](./configure-tiered-autopartition)
- [Query Tiered Tables from PGD and Lakehouse](./query-tiered-tables)
- [Monitor Tiered Tables status and storage savings](./monitor-tiered-tables)
