---
title: query_rag_stage
navTitle: QueryRagStage

---

<span id="griptape.engines.rag.stages.query_rag_stage.QueryRagStage"></span>

Bases:
 [`BaseRagStage`](./#griptape.engines.rag.stages.BaseRagStage "BaseRagStage (griptape.engines.rag.stages.BaseRagStage)")

<details><summary>Source Code in <code>griptape&#47;engines&#47;rag&#47;stages&#47;query_rag_stage.py</code></summary>

```python
@define(kw_only=True)
class QueryRagStage(BaseRagStage):
    query_modules: list[BaseQueryRagModule] = field()

    @property
    def modules(self) -> Sequence[BaseRagModule]:
        return self.query_modules

    def run(self, context: RagContext) -> RagContext:
        logging.info("QueryRagStage: running %s query generation modules sequentially", len(self.query_modules))

        [qm.run(context) for qm in self.query_modules]

        return context
```

</details>

-   `modules` <small>property</small>  <span id="griptape.engines.rag.stages.query_rag_stage.QueryRagStage.modules"></span> 

-   `query_modules = field()` <small>class-attribute</small> <small>instance-attribute</small>  <span id="griptape.engines.rag.stages.query_rag_stage.QueryRagStage.query_modules"></span> 

<span id="griptape.engines.rag.stages.query_rag_stage.QueryRagStage.run"></span>

### run(context)

<details><summary>Source Code in <code>griptape&#47;engines&#47;rag&#47;stages&#47;query_rag_stage.py</code></summary>

```python
def run(self, context: RagContext) -> RagContext:
    logging.info("QueryRagStage: running %s query generation modules sequentially", len(self.query_modules))

    [qm.run(context) for qm in self.query_modules]

    return context
```

</details>
