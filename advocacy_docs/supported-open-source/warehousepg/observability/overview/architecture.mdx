---
title: WarehousePG Observability Architecture
navTitle: Architecture
description: Understand the architechure of WarehousePG Observability and its main components
---

WarehousePG (WHPG) Observability monitors system performance metrics, analyzes cluster health, and enables database administrators to â€¦. on a WarehousePG environment.

## WarehousePG Observability architecture

The architecture comprises of the following components:

![architechure](../images/architecture.png)

### Collector service
Based on Grafana Alloy. Runs on the WHPG coordinator, standby, and segments.
Collect host level metrics and logs from segments and push them to the collector on the coordinator, which temporarily stores them in memory, and pushes them to Prometheus and Loki.

### WHPG Extension
The WarehousePG Observability Extension is a database extension installed on your WHPG cluster that creates the `observability` schema, which includes a number of views and external tables. 

### WHPG Exporter
The WarehousePG Exporter is a service that you can install in your WHPG cluster (on coordinator or standby coordinator) or in an external host. 
It pulls SQL metrics in the `observability` schema created by the Extension and WHPG catalog tables.
It provides an endpoint for Live Queries for Grafana.
It pushes SQL metrics data to Prometheus for historic data storage.

### Storage and visualization services
WHPG Observability requires a bundle of services, which you install outside the WHPG cluster, in order to store and visualize the data retrieved from the WHPG cluster.
You may install the services yourself, leverage an existing installation, or use our provided Docker Compose file to deploy them.
The required services are:

- **Loki** 
Endpoint for logs, receives data directly from WHPG collector service on coordinator.
Sends data to Grafana.

- **Prometheus**
Endpoint for host metrics and historic SQL metrics, it collects host level metrics from WarehousePG cluster and historic SQL data from the WHPG Exporter.

- **Grafana**
Data visualization: reads data from Prometheus, Loki and Exporter, and displays it on three pre-configured dashboards.
WarehousePG-Overview-Dashboard
WarehousePG-Detailed-Dashboard
WarehousePG-Logs-Dashboard
You may customize this your way. 

## How WHPG Observability works