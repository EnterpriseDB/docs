---
title: WarehousePG Observability Architecture
navTitle: Architecture
description: Understand the architechure of WarehousePG Observability and its main components
---

WarehousePG (WHPG) Observability monitors system performance metrics, analyzes cluster health, and enables database administrators to â€¦. on a WarehousePG environment.

## WarehousePG Observability architecture

The architecture comprises of the following components:

![architechure](images/architecture.png)

### Collector
Service based on Grafana Alloy that runs on the WHPG coordinator, standby, and segments.
It collects host level metrics and log files from all hosts and pushes them to the Collector service on the coordinator, which temporarily stores them in memory, and pushes them to Prometheus and Loki.

### Extension
Database extension on your WHPG cluster that creates the `observability` schema, which includes a number of views and external tables used for SQL metrics. 

### Exporter
Service you can install in your WHPG cluster (on the coordinator or standby coordinator) or in an external host. 
It runs queries against the `observability` schema and catalog tables on your WHPG cluster to obtain SQL and cluster-level metrics.
It exposes an endpoint to Grafana for live queries, and pushes the collected data to Prometheus for historic data storage.

### Storage and visualization services
WHPG Observability requires a bundle of services to store and visualize the data retrieved from the WHPG cluster.
You can install the services yourself outside your WHPG cluster, leverage an existing installation, or use our provided Docker Compose file to deploy them.
The required services are:

- **Loki** 
Endpoint for logs. Loki receives data directly from the Collector service on coordinator, and it exposes the data to Grafana.

- **Prometheus**
Endpoint for host metrics and historic SQL metrics. Prometheus receives host level metrics from the Collector, and historic SQL and cluster metrics from the Exporter.

- **Grafana**
Data visualization service. Grafana reads data from Prometheus, Loki and Exporter, and displays it on three pre-configured dashboards: WarehousePG-Overview-Dashboard, WarehousePG-Detailed-Dashboard, and WarehousePG-Logs-Dashboard. 

## How WHPG Observability works

