---
title: "Defining and Monitoring Postgres instances on AWS"
---

There are two scenarios in which you can monitor a Postgres instance on an AWS host with PEM:

> -   Postgres Instance running on AWS EC2
> -   Postgres Instance running on AWS RDS

## Monitoring a Postgres Instance Running on AWS EC2

After creating a Postgres instance on AWS EC2, you can use the PEM server to register and monitor your instance. The following scenarios are currently supported:

> -   Postgres instance and PEM Agent running on the same AWS EC2 and a PEM Server running on your local machine.
> -   Postgres instance and PEM Agent running on the same local machine and a PEM Server running on AWS EC2.
> -   Postgres instance and PEM Agent running on the same AWS EC2 and a PEM Server running in different AWS EC2.

!!! Note
    In the first two scenarios, you must configure the VPN on AWS EC2 , so the AWS EC2 instance can access the `pem` database. Please contact your network administrator to setup the VPN if needed.

The PEM Agent running on AWS EC2 or on your local machine should be registered to the PEM Server. Please note that when registering the PEM Agent with the PEM Server you should use the hostname of AWS EC2 instance. For more details on registering the PEM Agent see, [PEM Self Registration](../02_toc_pem_agent/07_pem_agent_self_registration/#pem_agent_self_registration).

You can register the Postgres instance running on AWS EC2 on PEM Server using the `Create - Server` dialog. For more details on registering the server using `Create - Server` dialog see, [Define a Server](07_pem_define_connection/#pem_define_connection). Use the `PEM Agent` tab on the `Create - Server` dialog to bind the registered PEM Agent with the Postgres instance.

When the PEM Agent is registered to the PEM Server and your Postgres instance that is running on AWS EC2 is registered to the PEM Server, you can monitor your instance with PEM.

## Monitoring a Postgres Instance Running on AWS RDS

While creating an AWS RDS database, choose `PostgreSQL` when prompted for `Engine options`. After creating a `Postgres(RDS)` instance on AWS, use `Create - Server` dialog to add the `Postgres(RDS)` instance to the PEM Server. Using this dialog you can describe a new server connection, bind the server to a PEM Agent, and display the server to the PEM browser tree control.

For detailed information on the `Create - Server` dialog and configuration details for each tab, see [Define a Server](07_pem_define_connection/#pem_define_connection).

The `PEM Agent` tab in the `Create - Server` dialog must have the `Remote Monitoring` field set to `Yes` to monitor the `Postgres(RDS)` instance on AWS instance using PEM Server.

![Create Server dialog - PEM Agent tab](../images/create_server_pem_agent_tab_remote_monitoring.png)

As the PEM Agent will be monitoring the Postgres(RDS) AWS instance remotely, the functionality will be limited as described below:

| **Feature Name**             | **Works with remote PEM Agent** | **Comments**                                                                                                                                                                                   |
| ---------------------------- | ------------------------------- | ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------- |
| Audit Manager                | No                              |                                                                                                                                                                                                |
| Capacity Manager             | Limited                         | There will be no correlation between the database server and operating system metrices.                                                                                                        |
| Log Manager                  | No                              |                                                                                                                                                                                                |
| Manage Alerts                | Limited                         | When you run an alert script on the database server, it will run on the machine where the bound PEM Agent is running, and not on the actual database server machine.                           |
| Manage Charts                | Yes                             |                                                                                                                                                                                                |
| Manage Dashboards            | Limited                         | Some dashboards may not be able to show complete data. For example, the operating system information of the database server will not be displayed as it is not available.                      |
| Manage Probes                | Limited                         | Some of the PEM probes will not return information, and some of the functionalities may be affected. For details about probe functionality, see the [PEM Agent Guide](/pem/latest/pem_agent/). |
| Postgres Expert              | Limited                         | The Postgres Expert will provide partial information as operating system information is not available.                                                                                         |
| Postgres Log Analysis Expert | No                              | The Postgres Log Analysis Expert will not be able to perform an analysis as it is dependent on the logs imported by log manager, which will not work as required.                              |
| Scheduled Tasks              | Limited                         | Scheduled tasks will work only for database server; scripts will run on a remote Agent.                                                                                                        |
| Tuning Wizard                | No                              |                                                                                                                                                                                                |
| System Reports               | Yes                             |                                                                                                                                                                                                |
| Core Usage Reports           | Limited                         | The Core Usage report will not show complete information. For example, the platform, number of cores, and total RAM will not be displayed.                                                     |
| Managing BART                | No                              | BART requires password less authentication between two machines, where database server and BART are installed. An AWS RDS instance doesn't allow to use host access.                           |
